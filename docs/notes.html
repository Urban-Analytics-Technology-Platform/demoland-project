<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Land Use Demonstrators - 4&nbsp; Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data_sources.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Notes</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Land Use Demonstrators</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/ciupava/LandUseDemonstrator/tree/main/docs" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="./Land-Use-Demonstrators.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Land Use Demonstrator</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Intro</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_sources.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Sources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Notes</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#november" id="toc-november" class="nav-link active" data-scroll-target="#november"><span class="toc-section-number">4.1</span>  November</a>
  <ul class="collapse">
  <li><a href="#variables-creation" id="toc-variables-creation" class="nav-link" data-scroll-target="#variables-creation"><span class="toc-section-number">4.1.1</span>  Variables creation</a></li>
  <li><a href="#some-literature-on-lur" id="toc-some-literature-on-lur" class="nav-link" data-scroll-target="#some-literature-on-lur"><span class="toc-section-number">4.1.2</span>  Some literature on LUR</a></li>
  <li><a href="#theoretical-framework" id="toc-theoretical-framework" class="nav-link" data-scroll-target="#theoretical-framework"><span class="toc-section-number">4.1.3</span>  Theoretical framework</a></li>
  <li><a href="#lur-in-python" id="toc-lur-in-python" class="nav-link" data-scroll-target="#lur-in-python"><span class="toc-section-number">4.1.4</span>  LUR in Python</a></li>
  <li><a href="#facts-on-ghg-emissions" id="toc-facts-on-ghg-emissions" class="nav-link" data-scroll-target="#facts-on-ghg-emissions"><span class="toc-section-number">4.1.5</span>  Facts on GHG emissions</a></li>
  </ul></li>
  <li><a href="#october" id="toc-october" class="nav-link" data-scroll-target="#october"><span class="toc-section-number">4.2</span>  October</a>
  <ul class="collapse">
  <li><a href="#defining-relations" id="toc-defining-relations" class="nav-link" data-scroll-target="#defining-relations"><span class="toc-section-number">4.2.1</span>  Defining relations</a></li>
  <li><a href="#working-questions" id="toc-working-questions" class="nav-link" data-scroll-target="#working-questions"><span class="toc-section-number">4.2.2</span>  Working questions:</a></li>
  <li><a href="#approximations" id="toc-approximations" class="nav-link" data-scroll-target="#approximations"><span class="toc-section-number">4.2.3</span>  Approximations</a></li>
  <li><a href="#python-code" id="toc-python-code" class="nav-link" data-scroll-target="#python-code"><span class="toc-section-number">4.2.4</span>  Python code</a></li>
  <li><a href="#preliminary-results" id="toc-preliminary-results" class="nav-link" data-scroll-target="#preliminary-results"><span class="toc-section-number">4.2.5</span>  Preliminary results</a></li>
  </ul></li>
  <li><a href="#september" id="toc-september" class="nav-link" data-scroll-target="#september"><span class="toc-section-number">4.3</span>  September</a>
  <ul class="collapse">
  <li><a href="#data-availability" id="toc-data-availability" class="nav-link" data-scroll-target="#data-availability"><span class="toc-section-number">4.3.1</span>  Data availability</a></li>
  <li><a href="#did-someone-already-do-this" id="toc-did-someone-already-do-this" class="nav-link" data-scroll-target="#did-someone-already-do-this"><span class="toc-section-number">4.3.2</span>  Did someone already do this?</a></li>
  </ul></li>
  <li><a href="#open-general-questions" id="toc-open-general-questions" class="nav-link" data-scroll-target="#open-general-questions"><span class="toc-section-number">4.4</span>  Open general questions</a>
  <ul class="collapse">
  <li><a href="#output-map-generation" id="toc-output-map-generation" class="nav-link" data-scroll-target="#output-map-generation"><span class="toc-section-number">4.4.1</span>  Output / map generation</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Notes</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<hr>
<p>This page is constantly updated on an (almost) daily base, meaning that the order is not dictated by a specific structure, just temporary adding up ideas and development of the project.</p>
<p>NB: in reverse order, that is more recent stuff is at the top of the document.</p>
<section id="november" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="november"><span class="header-section-number">4.1</span> November</h2>
<p>Need to fine-tune things after last talk with Dani (end of October).<br> Instead of trying to reproduce <a href="#did-someone-already-do-this">carbon.place results</a>, we want to produce a <mark><strong>Land Use regression model</strong></mark> <span class="math inline">\(\rightarrow\)</span> <strong>LUR</strong></p>
<hr>
<ol type="1">
<li><p>Generally used for air quality prediction <br> …FIND examples of non-air pollutants applications?</p></li>
<li><p>LUR potential predictor variables extraction … relevant for us? (limited number of variables) <span class="math inline">\(\rightarrow\)</span> <em>ideally we’d like to perform this as well</em></p></li>
<li><p>LUR output is raster VS vectorial <span class="math inline">\(\rightarrow\)</span> <em>we’ll need to aggregate the data at some spatial level (MSOAs for instance), introducing some level of approximation</em></p></li>
<li><p>not clear how the <em>spatial</em> connotation enter the model, just because we use data defined at (some) geographic level?</p></li>
</ol>
<section id="variables-creation" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="variables-creation"><span class="header-section-number">4.1.1</span> Variables creation</h3>
<p>We search now for data to be used as variables (land use features) to predict 4 indicators (see Intro <a href="./intro.html#indicators-building">here</a>):</p>
<ul>
<li><p><em>1.a/b</em>. Pollution/emissions</p>
<ul>
<li><p>data for actual GHG emissions (total, IE comprehensive of mobility, housing, etc) is <a href="#data-availability">only at LAD level</a></p></li>
<li></li>
</ul></li>
<li><p><em>1.c</em>. Green space accessibility</p>
<ul>
<li><p>UGS = Urban Green Space</p></li>
<li><p>see <a href="https://github.com/ciupava/LandUseDemonstrator/issues/5">Issue</a> on GitHub for relevant literature on indicators, definitions, methodology to generate UGS maps</p></li>
<li><p>accessibility is not actual data (like emissions for instance) but it’s itself calculated as an index, so what is the meaning in modeling it?</p></li>
<li><p>how we calculate the distance to the nearest green space… or the entrance gate (tricky)</p></li>
<li><p><strong>EEA Urban Atlas</strong> for UGS data (landcover map) <a href="https://www.eea.europa.eu/data-and-maps/data/copernicus-land-monitoring-service-urban-atlas">data available here</a> <br> Download per each metro areas (here)[https://land.copernicus.eu/local/urban-atlas/urban-atlas-2018?tab=download<br>] Method described in [WHO Europe 2016 report)(https://www.euro.who.int/__data/assets/pdf_file/0005/321971/Urban-green-spaces-and-health-review-evidence.pdf)</p></li>
</ul>
<blockquote class="blockquote">
<p>European Urban Atlas Class 1.4.1 (vector data code 14100): <strong>Green Urban Areas</strong> (European Commission, 2011)<br> Minimum mapping resolution 0.25 ha, Minimum width: 10 m<br> <em>Included:</em><br> • Public green areas for predominantly recreational use such as gardens, zoos, parks, castle parks.<br> • Suburban natural areas that have become and are managed as urban parks.<br> • Forests or green areas extending from the surroundings into urban areas are mapped as green urban areas when at least two sides are bordered by urban areas and structures, and traces of recreational use are visible.<br> <em>Not included:</em><br> • Private gardens within housing areas<br> • Cemeteries<br> • Buildings within parks, such as castles or museums<br> • Patches of natural vegetation or agricultural areas enclosed by built‐up areas without being managed as green urban areas</p>
</blockquote>
<p>Note that several green areas in Newcastle fall under the category “Pasture” (see for example Nuns Moor)</p>
<blockquote class="blockquote">
<p>Lands that are permanently used (at least 5 years) for fodder production. Includes natural or sown herbaceous species, unimproved or lightly improved meadows and grazed or mechanically harvested meadows. Regular agriculture impact influences the natural development of natural herbaceous species composition.</p>
</blockquote>
<p>and allotments fall into “Sports and leisure facilities”</p>
<p><img src="images/WHO_method_for_UGS.png" class="img-fluid"></p>
<ul>
<li><mark>CHECKING UK SOURCES</mark><br> data.gov, natural england, ons<br> Ordnance Survey (Open greenspace map)[https://osdatahub.os.uk/downloads/open/OpenGreenspace] <em>open data</em> <br> Advantages: • more accurate<br> • covers England, Scotland, Wales • <strong>has access points!!</strong></li>
</ul></li>
<li><p><em>2.b</em>. Jobs accessibility</p>
<ul>
<li>accessibility is not actual data (like emissions for instance) but it’s itself calculated as an index, so what is the meaning in modeling it?</li>
</ul></li>
<li><p><em>2.c</em>. House prices</p>
<ul>
<li>what scenario on house prices?</li>
</ul></li>
</ul>
</section>
<section id="some-literature-on-lur" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="some-literature-on-lur"><span class="header-section-number">4.1.2</span> Some literature on LUR</h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Land_use_regression_model">https://en.wikipedia.org/wiki/Land_use_regression_model</a>
<blockquote class="blockquote">
A raster graphic image of the area is generated and intersected with area-level population data to formulate the exposure distribution.
</blockquote></li>
<li><a href="https://www.sciencedirect.com/science/article/abs/pii/S1352231008005748">Hoek et al., 2008</a> “A review of land-use regression models to assess spatial variation of outdoor air pollution” <br> They review 25 land-use regression studies.<br>
<blockquote class="blockquote">
Application of the land-use regression approach for air pollution mapping was introduced in the SAVIAH (Small Area Variations In Air quality and Health) study (Briggs et al., 1997). The technique was initially termed regression mapping
</blockquote>
<blockquote class="blockquote">
Land-use regression combines monitoring of air pollution at typically 20–100 locations, spread over the study area, and development of stochastic models using predictor variables usually obtained through geographic information systems (GIS)
</blockquote>
<blockquote class="blockquote">
main components of LUR: monitoring data, geographic predictors and model development and validation
</blockquote></li>
<li><a href="https://www.sciencedirect.com/science/article/pii/S1877584515000325?via%3Dihub">Bertazzon et al., 2015</a> “Accounting for spatial effects in land use regression for urban air pollution modeling”</li>
</ul>
<blockquote class="blockquote">
LUR models are described by standard regression equations. Over the past decade, land use regression (LUR) modeling has emerged as a preferred method for assessing exposure to spatially heterogeneous pollutants, including NO2 (Health Effects Institute, 2010). Despite their advantages, LUR models rely on spatial data; therefore, they are subject to the spatial effects associated with the properties of these data.
</blockquote>
<ul>
<li><a href="https://github.com/dwmorley/RLUR">Morley and Gulliber, 2018</a>“A land use regression variable generation, modelling and prediction tool for air pollution exposure assessment”</li>
</ul>
<p><mark>RLUR</mark> software to develop LUR model in R;<br> Open-source code available in <a href="https://github.com/dwmorley/RLUR">GitHub</a>;<br> GUI with visualisation tools</p>
<ul>
<li><a href="https://www.researchgate.net/publication/339851484_PyLUR_Efficient_software_for_land_use_regression_modeling_the_spatial_distribution_of_air_pollutants_using_GDALOGR_library_in_Python">Ma et al.&nbsp;2020</a> “<mark>PyLUR</mark>: efficient software for land use regression modelling the spatial distribution of air pollutants using GDAL/OGR library in Python”</li>
</ul>
<blockquote class="blockquote">
Although conceptually quite simple, its successful implementation requires detailed knowledge of the area, expertise in GIS, statistics, and programming skills, which makes this modelling approach <strong>relatively inaccessible to novice users</strong>.
</blockquote>
<blockquote class="blockquote">
PyLUR out-performs <mark>RLUR</mark> for modelling in the Bradford and Auckland case studies examined. Furthermore, PyLUR is much more efficient in data processing and it has a capability to handle detailed GIS input data.
</blockquote>
<blockquote class="blockquote">
<sub><sup>The principles of LUR modelling can be summarized in <strong>five steps</strong>. <strong>First</strong>, air pollution monitoring and GIS data are collected within the scope of the study area. <strong>Secondly</strong>, different kinds of potential predictor variables for each site are generated using GIS buffering or other geospatial analysis methods. <strong>Thirdly</strong>, multiple regression analysis is carried out to develop one regression equation establishing the relationship between the observed air pollutant concentrations and significant predictor variables selected from a pool of all potential predictor variables. <strong>Fourthly</strong>, model performance is evaluated using holdout or cross-validation. **Finally*, once the model is successfully validated, it can be applied to predict the concentration at un-sampled points of interest or generate an air pollutant concentration map of the whole study area (Morley and Gulliver, 2018).</sup></sub>
</blockquote>
<ul>
<li><a href="https://www.sciencedirect.com/science/article/pii/S1364815221001511">Molter and Lindley, 2021</a> “Developing land use regression models for environmental science research using the <mark>XLUR</mark> tool – More than a one-trick pony”</li>
</ul>
<blockquote class="blockquote">
A Python toolbox for ArcGIS Pro that enables the development and application of land use regression models
</blockquote>
<p>… relevant for literature (it’s developed for ArcGIS, so no use)</p>
</section>
<section id="theoretical-framework" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="theoretical-framework"><span class="header-section-number">4.1.3</span> Theoretical framework</h3>
<p>In a general non-linear linear regression model we have a given dependent variable which we try to explain by several independent explanatory variables. <br> In our case for a LUR model we have, considering GHG emissions from mobility or housing:</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td>Dependent variable</td>
<td>actual data for GHG emissions</td>
<td></td>
</tr>
<tr class="even">
<td>Explanatory variables</td>
<td>landuse variables</td>
<td>(ex. n.&nbsp;of trips, distance, <br> mode of transport…)</td>
</tr>
</tbody>
</table>
<p><em>Formulas here</em></p>
</section>
<section id="lur-in-python" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="lur-in-python"><span class="header-section-number">4.1.4</span> LUR in Python</h3>
<ul>
<li><p>check out this blog <a href="https://towardsdatascience.com/how-to-build-a-regression-model-in-python-9a10685c7f09">How to Build a Regression Model in Python</a></p></li>
<li><p>Geographic Data Science with Python, book <a href="https://geographicdata.science/book/notebooks/11_regression.html">Chap. 11, Spatial Regression</a></p></li>
<li><p>Paper <a href="https://link.springer.com/article/10.1007/s11783-020-1221-5">PyLUR: Efficient software for land use regression modeling the spatial distribution of air pollutants using GDAL/OGR library in Python</a> <br> Note the code is available online on ResearchGate <a href="https://www.researchgate.net/publication/339851484_PyLUR_Efficient_software_for_land_use_regression_modeling_the_spatial_distribution_of_air_pollutants_using_GDALOGR_library_in_Python">here</a> (find “linked data” tab)</p></li>
</ul>
</section>
<section id="facts-on-ghg-emissions" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="facts-on-ghg-emissions"><span class="header-section-number">4.1.5</span> Facts on GHG emissions</h3>
<p>Governmental report <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1086967/uk-local-regional-greenhouse-gas-emissions-2005-2020-release.pdf">UK local authority and regional greenhouse gas emissions national statistics, 2005 to 2020</a></p>
</section>
</section>
<section id="october" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="october"><span class="header-section-number">4.2</span> October</h2>
<p><strong>Initial trials</strong></p>
<p>Working on <em>a. mobility based emissions</em> <span class="math inline">\(\rightarrow\)</span> IE transport data</p>
<p>&amp;</p>
<p>Building <em>base scenario</em></p>
<p>Roadmap:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">Try to dl/open/visualise SPC data <span class="math inline">\(\rightarrow\)</span> <em>Note: study case Metropolitan county of Tyne and Wear</em></li>
<li><input type="checkbox" disabled="">Investigate potentially relevant data from <a href="#people-behavior">UK Data Services</a> data <span class="math inline">\(\rightarrow\)</span> any other relevant dataset?</li>
<li><input type="checkbox" disabled="">How to connect/integrate TUS to SPC dataset – why?</li>
<li><input type="checkbox" disabled="">visualise the integrated dataset <span class="math inline">\(\rightarrow\)</span> <em>base scenario</em></li>
<li><input type="checkbox" disabled="">think “future scenarios”</li>
</ul>
<p><img src="images/tynewear_county_lads.png" class="img-fluid"> <em>The 5 LADs in the Metropolitan County of Tyne and Wear, highlighted are also the 4 major town areas</em></p>
<hr>
<p><strong>Keep in mind when you’ll “generalise” the procedure</strong></p>
<p><em>IE pass from the study case to a national case</em></p>
<ul>
<li><p>how to select MSOAs for Origin and Destination from the dataset (take off abroad destinations as well)</p></li>
<li></li>
</ul>
<hr>
<section id="defining-relations" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="defining-relations"><span class="header-section-number">4.2.1</span> Defining relations</h3>
<p>We can see the Indicators <span class="math inline">\(I_{i}\)</span>, with <span class="math inline">\(i = \{1, ..., n\}\)</span>, as a function of different land uses <span class="math inline">\(l_{j}\)</span> where <span class="math inline">\(j = \{1, ..., k\}\)</span> and <span class="math inline">\(I_{i}\)</span> can be expressed as generic mathematical relation (that we express with the symbol “<span class="math inline">\(\star\)</span>”“) between several <span class="math inline">\(l_{j}\)</span> weighted by <span class="math inline">\(k\)</span> generic weights/parameters <span class="math inline">\(w_{j}\)</span>, as follows:</p>
<p><span class="math display">\[I_{i}(l) = w_1^il_{1} \star  w_2^il_{2} \dots \star w_k^il_{k}\]</span></p>
<p>Different indicators can depend on same landuse variables, and per each indicator the scenarios can be expressed by acting on the paramters <span class="math inline">\(w_{j}\)</span>.</p>
<p>As an example, using the definition above the indicator Mobility based emissions (a.) could be expressed <strong>for commuting trips</strong> <mark>per mode of transport</mark> and per each MSOA as:</p>
<!-- $[\textit{emissions/ msoa / year}] = w_1[trips/day] \star w_2[distance/trip] \star w_3[n\_individuals] \star w_4[n\_commuting days/year] \star w_5[\textit{CO}_2 \textit{k}]$ -->
<p><span class="math display">\[
\begin{align}
[\textit{emissions/msoa/year}] &amp; =  w_1[trips/day] \star\\
&amp; \star  w_2[distance/trip] \star\\
&amp; \star  w_3[n\_individuals] \star\\
&amp; \star  w_4[\textit{n of commuting days/year}] \star \\
&amp; \star w_5[\textit{CO}_2 \textit{k}]
\end{align}
\]</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\([trips/day]\)</span> is a fixed value (average per person from DFT data … *)</li>
<li><span class="math inline">\([distance/trip]\)</span> is calculated as shortest distance between the MSOAs’ centroids</li>
<li><span class="math inline">\([n\_individuals]\)</span> is given by the UK Census 2011 commuting flow</li>
<li><span class="math inline">\([\textit{n of commuting days/year}]\)</span> is a fixed value (average per person from DFT data … *)</li>
<li><span class="math inline">\([CO_2 k]\)</span> is the carbon dioxide equivalent emission factor per mode of transport</li>
</ul>
</section>
<section id="working-questions" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="working-questions"><span class="header-section-number">4.2.2</span> Working questions:</h3>
<ul class="task-list">
<li><p><input type="checkbox" disabled="">which year to take into consideration for the analysis? (Census, conversion factors, surveys…)</p></li>
<li><p><input type="checkbox" disabled="">when I calculate the distance home-place of work, how do I consider the intraMSOA trips (IE within the same MSOA), as I am only taking into account the centroids of the MSOAs?</p></li>
<li><p><input type="checkbox" disabled="">how we count total number of people (age, people working)</p></li>
<li><p><input type="checkbox" disabled="">do we give the results per capita (then see point above) or total per MSOA</p></li>
<li><p><input type="checkbox" disabled="">how many hours for the working from home people (not counting for now, as not using transport)</p></li>
</ul>
<hr>
</section>
<section id="approximations" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="approximations"><span class="header-section-number">4.2.3</span> Approximations</h3>
<ol type="a">
<li><p>only OD within MSOAs of this county</p></li>
<li><p>considering as distance only the pop weighted centroids for each MSOA</p></li>
<li><p>London has specific values for CO2 conversion factors (ex for cabs, buses, underground) but only using general values (correct later if needed for London case)</p></li>
<li><p>…</p></li>
</ol>
<hr>
<p>Commuting is really just one part of the total travels by car per per person per year:</p>
<p><img src="images/car_trips_per_person_travel_survey.png" class="img-fluid"> <em>source: <a href="https://www.gov.uk/government/statistics/national-travel-survey-2020/national-travel-survey-2020">national travel survey</a></em></p>
<p>… it sounds then reductive to consider only commuting trips for emissions!</p>
<hr>
</section>
<section id="python-code" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="python-code"><span class="header-section-number">4.2.4</span> Python code</h3>
<p><strong>Note:</strong> first trials in R, as I am more confident with the language, and trying to reproduce the code from carbun calculator for <a href="https://github.com/creds2/CarbonCalculator/blob/master/R/prep_travel_to_work.R">prep_travel_to_work.R</a>,</p>
<p>will then translate to Python</p>
<ul>
<li><p>Remember to add in <em>READ_ME</em> a walkthrough.</p></li>
<li><p>Using <code>env.yml</code> <span class="math inline">\(\dots\)</span> <em>use <code>conda</code> or <code>poetry</code>?</em></p></li>
</ul>
</section>
<section id="preliminary-results" class="level3" data-number="4.2.5">
<h3 data-number="4.2.5" class="anchored" data-anchor-id="preliminary-results"><span class="header-section-number">4.2.5</span> Preliminary results</h3>
<p><em>Origin Destination flows of individuals for commuting to work (2011 UK Census data), the Metropolitan County of Tyne and Wear, separated by mode of transport</em> <img src="images/od_tynewear_bymode.png" class="img-fluid"></p>
<p><em>Preliminary results for GHG emissions from cars, total per MSOA per year in Tyne and Wear</em> <img src="images/results_tynewear_car_emis_prelim.png" class="img-fluid"></p>
</section>
</section>
<section id="september" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="september"><span class="header-section-number">4.3</span> September</h2>
<p><strong>Exploratory phase</strong></p>
<p>The idea is to focus on a few indicators (one or two) in order generate a <em>methodology</em> to apply to different variables (IE all the rest of indicators)</p>
<p>Concentrating on Indicators for <a href="./intro.html#net-zero">Net-zero a and b</a>:</p>
<ul>
<li><ol type="a">
<li><em>mobility based emissions</em> … integration with SPC <span class="math inline">\(/\)</span> AB-street?</li>
</ol></li>
<li><ol start="2" type="a">
<li><em>housing based emissions</em></li>
</ol></li>
</ul>
<section id="data-availability" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="data-availability"><span class="header-section-number">4.3.1</span> Data availability</h3>
<hr>
<ol type="1">
<li><del>(aggregated at LAD level) UK GHG emissions national statistics, estimates per Local Authority <a href="https://www.gov.uk/government/statistics/uk-local-authority-and-regional-greenhouse-gas-emissions-national-statistics-2005-to-2020">Data for 2005 - 2020</a></del> <span class="math inline">\(\rightarrow\)</span> this datum is a sum of emissions from 2005-2020</li>
</ol>
<hr>
<section id="a.-mobility-based-emissions" class="level4" data-number="4.3.1.1">
<h4 data-number="4.3.1.1" class="anchored" data-anchor-id="a.-mobility-based-emissions"><span class="header-section-number">4.3.1.1</span> a. mobility based emissions</h4>
<ol type="1">
<li><p>we can get from gov.uk CO<sub>2</sub>e (carbon dioxide equivalent) emissions factors for several occupations and travel modes, including transport, freight, etc <a href="https://www.gov.uk/government/collections/government-conversion-factors-for-company-reporting">link</a>;&lt;br&gt; We get the emission factors per mode of transport from the tab “Business travel-land” and “homeworking” (for working from home individuals)</p></li>
<li><p>OD flows from UK census … <strong>only to work and home</strong>? <em><del>check source</del></em> <span class="math inline">\(\rightarrow\)</span> YES <span class="math inline">\(\Downarrow\)</span></p></li>
<li><p>get travel to school flow data from Propensity to Cycle Tool <a href="https://www.pct.bike/m/">PCT</a>?</p></li>
<li><p>Location of usual residence and place of work by method of travel to work (…origin destination flows) <del>table WU03UK](https://wicid.ukdataservice.ac.uk/cider/wicid/downloads.php) at LAD level<br>
<em>Note:</em> can download all the tables for “Location of usual residence and place of work by method of travel to work” at different levels (LAD to LSOA, though the lattest is not Open data) here https://wicid.ukdataservice.ac.uk/cider/about/data_int.php?type=2</del> &lt;br&gt; <strong>safeguarded data!!</strong> git sttuslet’s find <mark>MSOA</mark> data: &lt;br&gt; <a href="Location%20of%20usual%20residence%20and%20place%20of%20work%20by%20method%20of%20travel%20to%20work">nomisweb</a></p></li>
</ol>
<ul>
<li><p>WU03BEW(with ‘outside UK’ detailed) <strong>safeguarded</strong></p></li>
<li><p>WU03EW (with ‘outside UK’ collapsed) <strong>open</strong></p></li>
</ul>
<hr>
</section>
<section id="b.-housing-based-emissions" class="level4" data-number="4.3.1.2">
<h4 data-number="4.3.1.2" class="anchored" data-anchor-id="b.-housing-based-emissions"><span class="header-section-number">4.3.1.2</span> b. housing based emissions</h4>
<p>Sub-national electricity and gad consumption data, <a href="https://www.gov.uk/government/statistical-data-sets/stacked-electricity-consumption-statistics-data">overview link</a></p>
<ul>
<li><a href="https://www.gov.uk/government/collections/sub-national-electricity-consumption-data">electricity consumption</a>:</li>
</ul>
<ol type="a">
<li><p>one table per year (20105 to 2020) of total consumption at region and LAD levels <a href="https://www.gov.uk/government/statistical-data-sets/regional-and-local-authority-electricity-consumption-statistics">link</a></p></li>
<li><p>one table per year (2010 to 2020) of total consumption at LSOA or MSOA level <a href="https://www.gov.uk/government/statistics/lower-and-middle-super-output-areas-electricity-consumption">link</a></p></li>
<li><p>electricity and gas consumption (kWh) at postcode level (England, Scotland, Wales), one table per year, 2013,2015-2020 <a href="https://www.gov.uk/government/publications/postcode-level-domestic-gas-and-electricity-consumption-about-the-data">Experimental</a></p></li>
<li><p>electricity consumption data for 2005 to 2020 as a single table, with years stacked one above the other <a href="https://www.gov.uk/government/statistical-data-sets/stacked-electricity-consumption-statistics-data">stacked data</a></p></li>
</ol>
<ul>
<li>analogous links for <a href="https://www.gov.uk/government/collections/sub-national-gas-consumption-data">gas consumption</a></li>
</ul>
<hr>
</section>
<section id="people-behavior" class="level4" data-number="4.3.1.3">
<h4 data-number="4.3.1.3" class="anchored" data-anchor-id="people-behavior"><span class="header-section-number">4.3.1.3</span> People behavior</h4>
<p>People behavior and time use from <em>The UK Time Diary Study 2014 - 2015</em> - UK Time Use Survey carried by NatCen and available from <a href="https://ukdataservice.ac.uk/">UK Data Service</a></p>
<p>what we can get from this source: time people spend in different activities, mode of transport (yes?)</p>
</section>
</section>
<section id="did-someone-already-do-this" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="did-someone-already-do-this"><span class="header-section-number">4.3.2</span> Did someone already do this?</h3>
<p><a href="https://www.carbon.place/">carbon.place</a></p>
<p>Project from Malcom Morgan (Univ of Leeds) …</p>
<blockquote class="blockquote">
<p>The PBCC estimates the average carbon footprint per person for each LSOA in England</p>
</blockquote>
<p><strong>NOTE:</strong></p>
<p>cool project, GitHub code available but not reproducible (?)</p>
<p>opened issue here <a href="https://github.com/creds2/CarbonCalculator/issues/6">https://github.com/creds2/CarbonCalculator/issues/6</a></p>
</section>
</section>
<section id="open-general-questions" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="open-general-questions"><span class="header-section-number">4.4</span> Open general questions</h2>
<p><em>And plausible answer</em></p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" checked="">importance of localised emissions and need for air-flow modelling … <em>not relevant for GHG</em></p></li>
<li><p><input type="checkbox" disabled="" checked="">what is the Research Question <span class="math inline">\(\rightarrow\)</span> <em>What are the “best” values in the parametrisation of the land use variables? Could we train the computer to predict these values?</em></p></li>
<li><p><input type="checkbox" disabled="" checked="">Resolution <del>LSOAS/</del> <em>MSOAS</em> ? feedback from Dani regarding SS: <em>SS gives conversion to LSOAs</em> <span class="math inline">\(\Downarrow\)</span></p></li>
<li><p><input type="checkbox" disabled="" checked="">how to generate scenarios - <em>ideas: change parameters’ range/values, run ABstreet simulations…?</em></p></li>
<li><p><input type="checkbox" disabled="" checked="">integrate with SPC - <em>need to integrate more Census variables? feasible?</em></p></li>
<li><p><input type="checkbox" disabled="">Use SPC (individuals’ level data) as we aggregate at MSOA level… what variables are meaningful when aggregated?</p></li>
<li><p><input type="checkbox" disabled="">can we actually build a methodology, given the different range of indicators and data?</p></li>
<li><p><input type="checkbox" disabled="">how turn on/off scenarios in the visualisation- <em>different layers in the map</em></p></li>
<li><p><input type="checkbox" disabled="">type of output - <em>map, web …</em> <del>MapBox</del> <em>MapLibre GL, Leaflet, …</em></p></li>
</ul>
<hr>
<section id="output-map-generation" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="output-map-generation"><span class="header-section-number">4.4.1</span> Output / map generation</h3>
<p>Note: could generate a website via <a href="https://maplibre.org/">MapLibre</a>, checked the options</p>
<!-- Let's see if [this map link](map_again.html) works  -->
<!-- What about a nested map

<link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/maplibre-gl-js-docs/assets/favicon/apple-touch-icon.png?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/maplibre-gl-js-docs/assets/favicon/favicon-32x32.png?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/maplibre-gl-js-docs/assets/favicon/favicon-16x16.png?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="manifest" href="/maplibre-gl-js-docs/assets/favicon/site.webmanifest?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="mask-icon" href="/maplibre-gl-js-docs/assets/favicon/safari-pinned-tab.svg?v=rMBbQAR5BL" color="#4264fb"/><link data-react-helmet="true" rel="shortcut icon" href="/maplibre-gl-js-docs/assets/favicon/favicon.ico?v=rMBbQAR5BL"/> -->


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data_sources.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Sources</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>