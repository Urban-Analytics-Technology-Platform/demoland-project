<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DemoLand - 5&nbsp; Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./method.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Notes</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DemoLand</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/ciupava/LandUseDemonstrator/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="./DemoLand.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">DemoLand</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Intro</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_sources.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Sources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./method.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Methodology</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Notes</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#february" id="toc-february" class="nav-link active" data-scroll-target="#february"><span class="toc-section-number">5.1</span>  February</a>
  <ul class="collapse">
  <li><a href="#greens-space-sites" id="toc-greens-space-sites" class="nav-link" data-scroll-target="#greens-space-sites"><span class="toc-section-number">5.1.1</span>  Greens space sites</a></li>
  <li><a href="#open-issuesquestions-on-indicators-building" id="toc-open-issuesquestions-on-indicators-building" class="nav-link" data-scroll-target="#open-issuesquestions-on-indicators-building"><span class="toc-section-number">5.1.2</span>  Open issues/questions on indicators building</a></li>
  <li><a href="#jobs-location" id="toc-jobs-location" class="nav-link" data-scroll-target="#jobs-location"><span class="toc-section-number">5.1.3</span>  Jobs location</a></li>
  </ul></li>
  <li><a href="#january" id="toc-january" class="nav-link" data-scroll-target="#january"><span class="toc-section-number">5.2</span>  January</a>
  <ul class="collapse">
  <li><a href="#accessibility-accessibility-accessibility" id="toc-accessibility-accessibility-accessibility" class="nav-link" data-scroll-target="#accessibility-accessibility-accessibility"><span class="toc-section-number">5.2.1</span>  Accessibility accessibility accessibility</a></li>
  </ul></li>
  <li><a href="#december" id="toc-december" class="nav-link" data-scroll-target="#december"><span class="toc-section-number">5.3</span>  December</a>
  <ul class="collapse">
  <li><a href="#house-prices-indicator" id="toc-house-prices-indicator" class="nav-link" data-scroll-target="#house-prices-indicator"><span class="toc-section-number">5.3.1</span>  House prices indicator</a></li>
  <li><a href="#accessibility-greenspaces" id="toc-accessibility-greenspaces" class="nav-link" data-scroll-target="#accessibility-greenspaces"><span class="toc-section-number">5.3.2</span>  Accessibility (… Greenspaces)</a></li>
  </ul></li>
  <li><a href="#agenda---november-29-tue---in-office" id="toc-agenda---november-29-tue---in-office" class="nav-link" data-scroll-target="#agenda---november-29-tue---in-office"><span class="toc-section-number">5.4</span>  Agenda - November, 29 [Tue] - In office</a></li>
  <li><a href="#november" id="toc-november" class="nav-link" data-scroll-target="#november"><span class="toc-section-number">5.5</span>  November</a>
  <ul class="collapse">
  <li><a href="#project-name" id="toc-project-name" class="nav-link" data-scroll-target="#project-name"><span class="toc-section-number">5.5.1</span>  Project name</a></li>
  <li><a href="#variables-creation" id="toc-variables-creation" class="nav-link" data-scroll-target="#variables-creation"><span class="toc-section-number">5.5.2</span>  Variables creation</a></li>
  <li><a href="#theoretical-framework" id="toc-theoretical-framework" class="nav-link" data-scroll-target="#theoretical-framework"><span class="toc-section-number">5.5.3</span>  Theoretical framework</a></li>
  <li><a href="#some-literature-on-lur" id="toc-some-literature-on-lur" class="nav-link" data-scroll-target="#some-literature-on-lur"><span class="toc-section-number">5.5.4</span>  Some literature on LUR</a></li>
  <li><a href="#lur-in-python" id="toc-lur-in-python" class="nav-link" data-scroll-target="#lur-in-python"><span class="toc-section-number">5.5.5</span>  LUR in Python</a></li>
  <li><a href="#facts-on-ghg-emissions" id="toc-facts-on-ghg-emissions" class="nav-link" data-scroll-target="#facts-on-ghg-emissions"><span class="toc-section-number">5.5.6</span>  Facts on GHG emissions</a></li>
  </ul></li>
  <li><a href="#october" id="toc-october" class="nav-link" data-scroll-target="#october"><span class="toc-section-number">5.6</span>  October</a>
  <ul class="collapse">
  <li><a href="#defining-relations" id="toc-defining-relations" class="nav-link" data-scroll-target="#defining-relations"><span class="toc-section-number">5.6.1</span>  Defining relations</a></li>
  <li><a href="#working-questions" id="toc-working-questions" class="nav-link" data-scroll-target="#working-questions"><span class="toc-section-number">5.6.2</span>  Working questions:</a></li>
  <li><a href="#approximations" id="toc-approximations" class="nav-link" data-scroll-target="#approximations"><span class="toc-section-number">5.6.3</span>  Approximations</a></li>
  <li><a href="#python-code" id="toc-python-code" class="nav-link" data-scroll-target="#python-code"><span class="toc-section-number">5.6.4</span>  Python code</a></li>
  <li><a href="#preliminary-results" id="toc-preliminary-results" class="nav-link" data-scroll-target="#preliminary-results"><span class="toc-section-number">5.6.5</span>  Preliminary results</a></li>
  </ul></li>
  <li><a href="#september" id="toc-september" class="nav-link" data-scroll-target="#september"><span class="toc-section-number">5.7</span>  September</a>
  <ul class="collapse">
  <li><a href="#data-availability" id="toc-data-availability" class="nav-link" data-scroll-target="#data-availability"><span class="toc-section-number">5.7.1</span>  Data availability</a></li>
  <li><a href="#did-someone-already-do-this" id="toc-did-someone-already-do-this" class="nav-link" data-scroll-target="#did-someone-already-do-this"><span class="toc-section-number">5.7.2</span>  Did someone already do this?</a></li>
  </ul></li>
  <li><a href="#open-general-questions" id="toc-open-general-questions" class="nav-link" data-scroll-target="#open-general-questions"><span class="toc-section-number">5.8</span>  Open general questions</a>
  <ul class="collapse">
  <li><a href="#output-map-generation" id="toc-output-map-generation" class="nav-link" data-scroll-target="#output-map-generation"><span class="toc-section-number">5.8.1</span>  Output / map generation</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Notes</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- Note that for images the relative path doesn't work since moved the book to separate repo and automated quarto publishing -->
<!-- links like "![](./../images/tynewear_lads_msoas.png)" nor "![](images/tynewear_lads_msoas.png)"" (as done before) wouldn't work-->
<!-- followed the suggestions from here  https://stackoverflow.com/questions/51002481/images-not-loading-when-deploying-to-github-pages-->
<!-- eventually the actual path + "?raw=true" works, though try to get back to a relative path when possible -->
<p>This page is constantly updated on an (almost) daily base, meaning that the order is not dictated by a specific structure, just temporary adding up ideas and development of the project.</p>
<p>NB: in reverse order, that is more recent stuff is at the top of the document.</p>
<section id="february" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="february"><span class="header-section-number">5.1</span> February</h2>
<section id="greens-space-sites" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="greens-space-sites"><span class="header-section-number">5.1.1</span> Greens space sites</h3>
<p>A first accessibility computation using Ordnance Service (OS) open data was rejected, as not in line with expected results.</p>
<p>The reason for this are:</p>
<ul>
<li>the data misses some vast green sites outside of town</li>
<li>the chosen metric was not proper [IE count the n of access points accessible within 15 min from origins]</li>
</ul>
<p>Dealing with the two issues separately:</p>
<hr>
<p>The good thing of the OS data is that they are accurate (resolution, categories) AND they contain also the access points (which for everyone’s sake we are gonna refer to as <em>entrances</em>).<br> <strong>NOTE:</strong> we need <em>entrances</em> to green space as the destinations for our time travel matrices.<br> A good candidate to make up for not covered areas is the <em>landuse</em> layer from OpenStreetMap (OSM).<br></p>
<p>[from OSM landuse layer we consider the tags/fields: <code>cemetery</code>, <code>forest</code>, <code>nature reserve</code>, <code>park</code>, <code>recreation ground</code>]<br></p>
<p>OSM data has very much good cover of the existing green sites, but: lacks a proper classification, doesn’t have entrances to sites, doesn’t distinguish between public/private/military spaces, therefore the use of OSM would bring to <em>over</em>-estimate green spaces. Example: in OSM we have some side-road areas inside <a href="https://en.wikipedia.org/wiki/MetroCentre_(shopping_centre)">Metrocentre</a> classified as forest.</p>
<p>In order to understand parks where people actually can/does pass through, a cross-check was carried out manually looking for parks with existing trails (passing through them) using <a href="https://hiking.waymarkedtrails.org/">https://hiking.waymarkedtrails.org/</a> AND Google Street View to check entrances to parks/greens/ etc [IE some entrances actually show a sign that make it clear if it’s a public access or not]</p>
<p>List of parks/green spaces which we would want to consider in the green belt/suburbs of Tyne and Wear (and their status, IE open/public etc):<br></p>
<table class="table">
<thead>
<tr class="header">
<th>park name</th>
<th style="text-align: center;">status</th>
<th>location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Chopwell Woodland</td>
<td style="text-align: center;">open</td>
<td>SW</td>
</tr>
<tr class="even">
<td>Milkweelburn Wood</td>
<td style="text-align: center;">open</td>
<td>SW</td>
</tr>
<tr class="odd">
<td>Watergated Park</td>
<td style="text-align: center;">open</td>
<td></td>
</tr>
<tr class="even">
<td>Silverhill Wood / Ravesworth Estate</td>
<td style="text-align: center;">closed</td>
<td></td>
</tr>
<tr class="odd">
<td>Banesley Lane woodland</td>
<td style="text-align: center;">open</td>
<td></td>
</tr>
<tr class="even">
<td>Hedley Hall Woods</td>
<td style="text-align: center;">open</td>
<td></td>
</tr>
<tr class="odd">
<td>Spen Banks / Sherburn Green Woods</td>
<td style="text-align: center;">open</td>
<td></td>
</tr>
<tr class="even">
<td>Clinty Wood</td>
<td style="text-align: center;">?</td>
<td></td>
</tr>
<tr class="odd">
<td>Gibside national Trust</td>
<td style="text-align: center;">closed ($$)</td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<p>We want to generate a metric that take into account the proximity to a green space AND the size of the site you are accessing to. It doesn’t matter how many access points are accessible, as long as one gives you access to the site within 15 min (walk, bike, other means)</p>
<p>Metric: once generated the time travel matrix (OAs centroids to GS entrances) retain one access point per park, IE consider only once each park that is reachable at least through one access point in 15 min. Then sum up all the areas of the reachable parks.</p>
<p>In order to do so, we need to clean the data from the eccessive entrances: many sites are included within other ones (for example a playground or tennis court can be enclosed in a public park). These enclosed sites also generate an overestimate of the accessible area, because they are overlapping with the main major park - which is the only category/feature/polygon we would like to consider.<br></p>
<p>First of all we clean the OS data from not-wanted categories, IE areas which are green but not openly accessible by the public.<br> These include: allottments, golf courses, bowling greens.</p>
<p>We then can do this consideration: most of the times it’s the 2 categories <code>Playing Field</code> and <code>Public Park Or Garden</code> that contain other categories within their boundaries. We could play with this. <code>Other Sport Facilities</code> also contains and is contained, but mostly is contained.</p>
<p>The hierarchy of the layers seems to be roughly this:<br> <code>Public Park Or Garden</code> <em>contains</em><br> <code>Playing Field</code> <em>contains</em><br> <code>Other Sport Facilities</code> <em>contains</em><br> rest of categories.<br></p>
<p>After several trials with spatial joins and other geospatial operations, have managed to obtain a good results by separating the above categories into single layers and performing operations among them.<br> See notebook <code>greenspace_datacleaning.ipynb</code> for details.</p>
</section>
<section id="open-issuesquestions-on-indicators-building" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="open-issuesquestions-on-indicators-building"><span class="header-section-number">5.1.2</span> Open issues/questions on indicators building</h3>
<p><strong>Accessibility</strong></p>
<p>accessibility computation:</p>
<ul>
<li>routing engine: <em>5r</em>
<ul>
<li>in python:
<ul>
<li>together with <code>tracc</code> or <code>pysal/access</code></li>
<li>~~use <code>conveyal</code> with <code>mongoDB</code> ~~<mark>(not tried yet)</mark></li>
</ul></li>
<li>in R: wrapped within <em>r5r</em> <mark>(not tried yet)</mark></li>
</ul></li>
<li>ttm generation:
<ul>
<li>we only consider origins within the county, what about extra zonal areas?</li>
<li>can generate one single table with multimodal trip &gt; <em>can create a comprehensive table using scripting</em></li>
<li>how does it work with scenarios generation - especially for OSM</li>
<li>using random date and time in database: <code>2023,1,19,8,30</code>;
<ul>
<li>could generate several network graphs and get median value of them all (see Pereira about this)</li>
<li>optimal date? (<a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/853603/notes-and-definitions.pdf">Journey Time Statistics</a> use a <em>Tuesday in October</em>)</li>
</ul></li>
<li><del>the ttm with origins OAs (centroids) to destinations LSOAs (centroids) for transit (leg_mode walk) takes 39 min!</del></li>
<li>OAs as origins … while we could “force” the points to the nearest road node (see Statistics method mentioned above)</li>
</ul></li>
<li>GTFS data:
<ul>
<li>good source for UK or do we need to generate it ourselves from</li>
<li>can we edit the GTFS file, in case we want add a route / stop?</li>
</ul></li>
<li>measuring acc to jobs:
<ul>
<li>can we find more detailed data of <em>where</em> people work?</li>
<li>and of where people live?</li>
</ul></li>
<li>15 min neighborhoods
<ul>
<li>approximating where people live, IE can we improve the location from actual approximation to population weighted centroids?</li>
</ul></li>
</ul>
<p><strong>GTFS data handling</strong></p>
<p>Checking the possibility to view and edit GTFS data with <code>[gtfs_kit](https://gitlab.com/mrcagney/gtfs_kit)</code> in Python.<br> All the trials are in <code>python/gtfs_kit_trials.ipynb</code>.<br> Note: created env_gtfs-kit.yml environment to test the package.</p>
<p>working with the files in <code>raw/GTFS</code>:</p>
<ul>
<li><code>itm_all_gtfs.zip</code>:
<ul>
<li>GTFS file downloaded from https://data.bus-data.dft.gov.uk/timetable/download/gtfs-file/all/</li>
<li>this file was accessed though the website https://www.transit.land/feeds/f-bus<sub>dft</sub>gov~uk</li>
<li>It contains all the UK buses only? <mark><strong>CHECKING</strong></mark></li>
</ul></li>
<li><code>itm_north_east.gtfs.zip</code>:
<ul>
<li>should be a subset of the one above for North East England</li>
<li>downloaded from same source, where I have managed to get subset (don’t remember how)</li>
<li></li>
</ul></li>
<li><code>NE.zip</code>:
<ul>
<li>GTFS generated and downloaded from UK2GTFS https://github.com/ITSLeeds/UK2GTFS, see <em>releases</em></li>
<li>this file has no shape.txt but it’s for North East England</li>
</ul></li>
</ul>
<p>Have done some trials in Qgis to view the routes (starting from the file shape.txt), we want to understand if only buses are in this GTFS data or also for example the light rail line (Yellow, owned and managed by <a href="https://www.nexus.org.uk/metro">Nexus</a>) is included.</p>
<p>It might be a disadvantage to use the whole UK data, but it might be more complete than the local one (NE) generated in UK2GTFS.</p>
<p>We would like also to be able to edit the GTFS data, adding a line/stop.</p>
<p>:bangbang: :loud_sound: <strong>update</strong> :loud_sound: :bangbang:</p>
<p>decided that the best source to use (compromise of coverage, file size, reliability) is the <code>north_east</code> version of bus-data.dft.gov</p>
<p>in fact it looks loike the metro line (yellow) is included</p>
<p>Two screenshots from sources used to cross-check the data:<br> 1. Dustin’s bus spotting website (<a href="https://dabreegster.github.io/bus_spotting/">bus spotting</a>) <img src="https://github.com/ciupava/LandUseDemonstrator/blob/main/images/gtfs_bus_spotting.png?raw=true" class="img-fluid"></p>
<ol start="2" type="1">
<li>personal map on <a href="https://felt.com/map/TyneWear-sXwTHCjIQLGJGDS0dYAF9AD">Felt</a> with added transport network layer <img src="https://github.com/ciupava/LandUseDemonstrator/blob/main/images/gtfs_felt.png?raw=true" class="img-fluid"></li>
</ol>
</section>
<section id="jobs-location" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="jobs-location"><span class="header-section-number">5.1.3</span> Jobs location</h3>
<p>We have number of jobs as a datum down to LSOA level, it comes from <a href="https://www.nomisweb.co.uk/sources/bres">nomis</a></p>
<blockquote class="blockquote">
An employer survey of the number of jobs held by employees broken down by full/part-time and detailed industry (5 digit SIC2007). The survey records a job at the location of an employees workplace. Available from country down to lower level super output area and Scottish datazone.
</blockquote>
<p>For destinations, when calculating the travel time matrix (TTM) to jobs locations, we can use then the population weighted centroids (PWC) of LSOAs areas. This assumption though affects the distances we calculate, in particular when considering vast industrial/business estates, where very few population is present - in this case in fact the PWC centroid will be probably (or could be) located in a marginal point of the polygon (IE LSOA area), resulting in invalid results.</p>
<p>See as an example the image below (created in Qgis) showing the Team Valley trading estate in Gateshead <a href="https://goo.gl/maps/zsKWLGDe5jDH1pRJ7">location</a></p>
<p><img src="https://github.com/ciupava/LandUseDemonstrator/blob/main/images/compare_LSOAvsWPZ.png?raw=true" class="img-fluid"> Red dots = OA centroids (our origins)<br>pink lines = LSOAs boundaries<br> yellow dots = LSOAs centroids <br>blue dots = WPS centroids</p>
<p>Looking for alternatives, I have found a geography for the Census that takes into account the working population.</p>
<p><a href="https://www.ons.gov.uk/methodology/geography/geographicalproducts/areaclassifications/2011workplacebasedareaclassification/classificationofworkplacezonesfortheukabouttheareaclassifications">Workplace Zones (WPZ)</a></p>
<blockquote class="blockquote">
<p>Workplace Zones are a small-area geography designed to contain a consistent number of workers allowing workplace statistics to be released at a more granular level.</p>
</blockquote>
<p>The data available at this geographic level are <a href="https://www.nomisweb.co.uk/sources/census_2011_wp">here</a> and they include the <em>Workplace population (table WP101EW)</em></p>
<blockquote class="blockquote">
<p>This dataset provides 2011 Census estimates of the workplace population in England and Wales by residence type (household or communal resident), by sex and by age. The estimates are as at census day, 27 March 2011.</p>
</blockquote>
<p>We have decided to use the number of workers as a proxy for jobs count (STRONG ASSUMPTION).<br> We can then use as destinations the WPZ centroids, and as n.&nbsp;of jobs (opportunities) the working population for the WPZ.<br> A stronger variable could be generated using the location from the WPZ (destination), and as opportunities a interpolation from the LSOA jobs count to the WPZ areas.<br> Note that the relation between Output Areas and WPZ is that “in England and Wales they [WPS] are designed to align with Middle Layer Super Output Areas (MSOAs)”.</p>
<p><strong>Conclusions:</strong> In any case we need to make an approximation: using LSOA we give up on location, using WPZ we give up on actual (estimated?) job count.<br></p>
<p>The ideal situation would be to have the number of jobs and their location / employment centres.<br> A way to deal with the lack of data on this, could be to generate it using <a href="http://download.companieshouse.gov.uk/en_output.html">Free Company Data Product</a></p>
<blockquote class="blockquote">
<p>downloadable data snapshot containing basic company data of live companies on the register</p>
</blockquote>
<p>From this data set we can get number of companies registered <em>at postcode level</em> (see data fields <a href="https://resources.companieshouse.gov.uk/toolsToHelp/pdf/freeDataProductDataset.pdf">here</a>) which is quite detailed, and then find a way to aggregate/interpolate them to identify “job centres”.<br> We have postcodes centroids from geoportal-gov.</p>
<p>As a future improvement, keep in mind the idea to generate more precise job locations, either by using the House company data, or other sources (and ideas).</p>
</section>
</section>
<section id="january" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="january"><span class="header-section-number">5.2</span> January</h2>
<p>January starts basically as a continuation of the work started in December.</p>
<p><em>Warming up</em><br> Image created in Qgis showing median house prices (year ending March 2022) and green spaces in Tyne and Wear county (current case study): <img src="https://github.com/ciupava/LandUseDemonstrator/blob/main/images/tynewear_houseprices2022_greenspace_lsoa.png?raw=true" class="img-fluid"> <em>Note:</em></p>
<ul>
<li>houseprices <a href="#house-prices-indicator">data</a> are associated to the LSOA boundaries shp via the python code in <a href="./../python/data_prep.ipynb"><code>data_prep.ipynb</code></a></li>
<li>green spaces are from the OS open data base <a href="#variables-creation">see description here</a></li>
</ul>
<section id="accessibility-accessibility-accessibility" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="accessibility-accessibility-accessibility"><span class="header-section-number">5.2.1</span> Accessibility accessibility accessibility</h3>
<blockquote class="blockquote">
<p>Accessibility is understood as the ease with which a person can reach places and opportunities from a given location and it results from the interaction between the transport system, land-use patterns, and the constraints of individuals <br> (Pereira et al.&nbsp;2019, <em>Distributional effects of transport policies on inequalities in access to opportunities in Rio de Janeiro</em>, Journal of Transport and Land Use 12(1): 741-764)</p>
</blockquote>
<p>Let’s start from <em>green spaces</em> (easier?) to create methodology, then pass on to <em>jobs</em>…</p>
<ul>
<li>resolution (LSOA…?)</li>
<li>find relation to land use</li>
<li>generate indicators:
<ul>
<li>relevant variables</li>
<li>relevant scenarios</li>
</ul></li>
</ul>
<hr>
<p><strong>IDEAS in random order</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="">accessibility definition??</li>
<li><input type="checkbox" disabled="">Identify the shortest path between two locations using the OSM transport network:<ul class="task-list">
<li><input type="checkbox" disabled=""><a href="https://www.routino.org/">routino</a> application for finding a route between two points using OSM</li>
<li><input type="checkbox" disabled=""><a href="https://valhalla.github.io/valhalla/">valhalla</a> open source routing engine and accompanying libraries for use with OSM</li>
<li><input type="checkbox" disabled="" checked=""><a href="https://wiki.openstreetmap.org/wiki/OpenTripPlanner">OpenTripPlanner</a> open-source multimodal trip planning software system</li>
<li><input type="checkbox" disabled="">Plan4better <a href="https://plan4better.de/en/">Geo Open Accessibility</a> GOAT tool</li>
<li><input type="checkbox" disabled=""><a href="https://osmnx.readthedocs.io/en/stable/">OSMnx</a> Python package</li>
<li><input type="checkbox" disabled="">build from OSM and implementing Dijkstra myself (??? <span class="citation" data-cites="Dustin">@Dustin</span> suggestion)</li>
<li><input type="checkbox" disabled="" checked=""><a href="https://github.com/conveyal/r5">R5 - Conveyal</a>:<ul>
<li>in R: <a href="https://ipeagit.github.io/r5r/">r5r</a></li>
<li>in Python: <mark><a href="https://r5py.readthedocs.io/en/stable/index.html">r5py</a></mark></li>
</ul></li>
</ul></li>
<li><input type="checkbox" disabled="">… check Propensity to Cycle Tool by Robin? [PTC]</li>
<li><input type="checkbox" disabled="">define the paths we want to see https://en.wikipedia.org/wiki/Shortest_path_problem#Algorithms<ul>
<li>from where to where?</li>
<li>how to define people’s home… <del>centroids</del> buildings??</li>
</ul></li>
</ul>
<hr>
<p>2 ways of seeing accessibility:</p>
<ul>
<li>between “areas” (IE “from this LSOA I can access N schools/jobs/… located in other LSOAS”)<br> calculated using origin/destination matrix for centroids (pop weighted likely) and cumulative sum of opportunities</li>
<li>from the amenity (school/job/hospital…) <br> generate a N-min “isochrone” (depending on mode) and see how it overlaps with population distribution (at LSOA level? the more detailed the merrier)</li>
</ul>
<p>apparently the distinction is between passive and active accessibility <a href="https://github.com/jamaps/tracc">see</a></p>
<hr>
<p><em>Note</em> <br> When you have available the 2 datasets:</p>
<ol type="1">
<li><code>land_use_data</code> - file with columns like <code>population</code>, <code>jobs</code>, <code>school</code> per LSOA (or whichever geography unit)</li>
<li><code>travel_matrix</code> - origin destination matrix with travel cost column (can use time rather than distance, as a cost proxy) per LSOAs (<code>from_id</code>, <code>to_id</code>, <code>travel_time</code>)</li>
</ol>
<p>you can run and play around with <code>accessibility</code>, a <a href="https://github.com/ipeaGIT/accessibility">package</a> in R from Rafa Pereira from <a href="https://ipeagit.github.io/accessibility/articles/accessibility.html">ipeagit</a></p>
<blockquote class="blockquote">
<p>calculate active and passive accessibility levels using multiple accessibility metrics, such as cumulative opportunities (using either a travel cost cutoff or a travel cost interval), minimum travel cost to closest N number of activities, gravitational measures and different floating catchment area methods.</p>
</blockquote>
<ul>
<li>or run <code>tracc</code> or <code>pysal/access</code> pr <code>rpy5</code> on the TTM</li>
</ul>
<em><strong>even better:</strong></em><br> from the above (written in <code>R</code>), reference to Python stuff here:
<blockquote class="blockquote">
<ul>
<li><a href="https://github.com/jamaps/tracc">tracc</a>: Transport accessibility measures in Python</li>
<li><a href="https://access.readthedocs.io/en/latest/">access</a>: Spatial Access for PySAL
<ul>
<li><a href="https://github.com/tetraptych/aceso">aceso</a>: a lightweight Python package for measuring spatial accessibility</li>
</ul></li>
</ul>
</blockquote>
<p>… see application and comments directly in <a href="./../python/accessib.ipynb">accessib.ipynb</a><br></p>
<hr>
<p>In order to run these functions we need to create/have the following input files:</p>
<ul>
<li><p>transit time data (origin-destination matrix with time) between origins and destinations</p></li>
<li><p>supply / opportunity:</p>
<ul>
<li><ol type="a">
<li><em>job counts per area</em> can download data at LSOA level (one file per LAD, or full county) from <a href="https://www.nomisweb.co.uk/sources/bres">Nomis BRES</a></li>
</ol></li>
<li><ol start="2" type="a">
<li><em>other type of opportunity</em> (ex: n of groceries, n of schools, etc… extension of greenspace? <mark><strong>n of access points?</strong></mark>)</li>
</ol></li>
</ul></li>
</ul>
<p><br><br> as a proxy for future complicated stuff and to try something for now, let’s generate the number of access points (to greenspaces) per LSOA… <br>what would be the fastest way:</p>
<ul>
<li>QGIS analysis (sure a function exists for this, but this solution is valid only temporarily, better the next one)</li>
<li>in Python with Geopandas (or similar stuff) I assume it’s doable</li>
</ul>
<p>A good explanation of the process is in the <a href="https://r5py.readthedocs.io/en/stable/notebooks/basic-usage.html#data-requirements">r5py documentation</a></p>
<hr>
<p><strong>Trials</strong></p>
<p>Different trials for accessibility calculation are accessible as notebook files within the <a href="./../python/">python folder</a>, generally named as <code>accessib_****_.ipynb</code></p>
<p><strong>1. OTP</strong></p>
<p>Calculations for OTP in the script <code>[accessib_OTP.ipynb](./../python/accessib_OTP.ipynb)</code></p>
<p>Started by the tutorial at <a href="https://github.com/marcusyoung/otp-tutorial">https://github.com/marcusyoung/otp-tutorial</a></p>
<blockquote class="blockquote">
<p>Young, M. (2021). OpenTripPlanner - creating and querying your own multi-modal route planner.</p>
</blockquote>
<p><img src="https://github.com/ciupava/LandUseDemonstrator/blob/main/images/tynewear_isochrones_withOTP.png?raw=true" class="img-fluid"><em>Examples of 15-90 minisochrones from (54.96835, -1.60778) generated using OTP for walk/transit mode, at 9am on 01-19-2-23)</em></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">time travel matrix <span class="math inline">\(\rightarrow\)</span> using OTP OpenTripPlanner with M Young instructions<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">find GTFS data</li>
<li><input type="checkbox" disabled="" checked="">download OSM data</li>
<li><input type="checkbox" disabled="" checked="">build graph.obj</li>
</ul></li>
<li><input type="checkbox" disabled="" checked="">supply data (opportunities / land use / …)</li>
<li><input type="checkbox" disabled="" checked="">run <code>tracc</code> for calculating accessibility to jobs… see <a href="./../python/basic_accessibility_example_TRACC.ipynb">basic_accessibility_example_TRACC.ipynb</a></li>
<li><input type="checkbox" disabled="" checked="">run also for green spaces, as in “minimum travel time to reach n destinations” (see above link)</li>
</ul>
<p><strong>Feedback</strong><br> The above procedure makes it unclear to understand the results PLUS editing the parameters by own requirements (in particular in creating the TTM), <strong>so</strong> trying to re-do the same <mark><strong>using r5py</strong></mark></p>
<p><strong>2. r5py + tracc</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">time travel matrix –&gt; more editable?? <em>shorter to generate, no need of a graph building</em><ul class="task-list">
<li><input type="checkbox" disabled="" checked="">find GTFS data</li>
<li><input type="checkbox" disabled="" checked="">download OSM data</li>
<li><input type="checkbox" disabled="" checked="">build <del>graph.obj?</del> network</li>
</ul></li>
<li><input type="checkbox" disabled="" checked="">supply data (opportunities / land use / …)</li>
<li><input type="checkbox" disabled="" checked="">calculating accessibility to jobs <em>using <code>tracc</code></em></li>
<li><input type="checkbox" disabled="" checked="">run also for green spaces, as in “minimum travel time to reach n destinations” <em>using <code>tracc</code></em></li>
</ul>
<p>Note that the accessibility calculation is not supported in the <code>r5py</code> (see <a href="https://r5py.readthedocs.io/en/stable/notebooks/basic-usage.html#introduction">here</a>)</p>
<blockquote class="blockquote">
<p>At the time of this writing, only the computation of travel time matrices has been fully implemented. Over time, r5py will be expanded to incorporate other functionalities from R5.</p>
</blockquote>
<p>but you can run this <code>r5</code> functionality (and everything that <em>Conveyal</em> does, IE “Conveyal Analysis”) using <code>MongoDB</code> locally:<br> <a href="https://github.com/conveyal/r5#configuration">github page</a></p>
<p><strong>-STILL NEED TO CHECK THIS OPTION-</strong></p>
<hr>
<p><mark><strong>TO_DO:</strong></mark> (once run the above stuff, first trial with jobs accessibilty) <br> <strong>generalise</strong> the procedure above in order to create indicators for accessibility:</p>
<ul>
<li>input variables format (table fields, etc)</li>
<li>understand how to edit parameters of time travel matrix and generate more of them</li>
<li>understand how travel time matrix work, as atm it seems to only generate transit mode matrix</li>
<li>scenarios?</li>
</ul>
<hr>
</section>
</section>
<section id="december" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="december"><span class="header-section-number">5.3</span> December</h2>
<p><mark>Hands on code finally?</mark></p>
<ol type="1">
<li>Let’s start from the indicator of <code>House prices</code>, as it is the only one indicator we have atm that is actual values data, not deterministically defined (see <a href="./data_sources.html#comprehensive-tables">table here</a>).<br></li>
<li>Also <code>greenspace</code> is a possible candidate to start the analysis, for determining a method for <mark>accessibility calculation</mark>. In this case consider <a href="https://valhalla.readthedocs.io/en/latest/valhalla-intro/">Valhalla</a>.</li>
</ol>
<p><img src="https://github.com/ciupava/LandUseDemonstrator/blob/main/images/tynewear_lads_msoas.png?raw=true" class="img-fluid"><em>The 5 LADs in Tine and Wear (labelled by <code>LAD20NM</code> and <code>LAD20CD</code>), highlighted in gray the major urban areas, bordered in blue the 145 MSOAs</em></p>
<hr>
Putting in doubt the use of LUR for what we want to do <mark>as we are gonna have aggregated outputs</mark>
<blockquote class="blockquote">
This regression-based approach estimates the ambient pollutant concentrations at un-sampled points of interest by considering the relationship between ambient concentrations and several predictor variables selected from the surrounding environment
</blockquote>
<blockquote class="blockquote">
A raster graphic image of the area is generated and intersected with area-level population data to formulate the exposure distribution.
</blockquote>
<p>Example of a raster as output of a LUR analysis:</p>
<p><img src="https://github.com/ciupava/LandUseDemonstrator/blob/main/images/rlur_example.png?raw=true" class="img-fluid"></p>
<p><strong>QUESTION:</strong> WHY do we want aggregated (MSOAs) outputs? <br><em>I think it’s because we want to be able to compare among scenarios</em> <br>+ (quoting Dani) <em>because SPC data is at MSOAs scale</em></p>
<hr>
<p>Inputs from call with Federico (14 Dec):</p>
<ul>
<li><a href="https://github.com/hiring-lab/job_postings_tracker">jobs posting tracker</a> (ONS ???)
<ul>
<li>from Indeed Hiring Lab (employment website for job listings)</li>
<li>In the United Kingdom, they provide:
<ul>
<li><code>regional_postings_gb.csv</code> This file contains the % change in seasonally-adjusted postings since February 1, 2020 for total job postings in each region in the UK.</li>
<li><code>city_postings_gb.csv</code> This file contains the % change in seasonally-adjusted postings since February 1, 2020 for total job postings in each city in the UK.</li>
</ul></li>
</ul></li>
<li>BRES (Business Registry and Employment Survey) <a href="https://www.nomisweb.co.uk/sources/bres">data</a>
<ul>
<li>An employer survey of the number of jobs held, broken down by industry</li>
<li>estimates at detailed geographical and industrial levels (from country down to LSOA)</li>
</ul></li>
</ul>
<hr>
<p><strong>Exploratory phase</strong> The idea is to plot/visualise/put together a few pieces of information and see how they interact with each other, get ideas on what to do with them.</p>
<p>Steps:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">understanding Python VS excel (for house prices data)</li>
<li><input type="checkbox" disabled="" checked="">understanding Python VS shp (for greenspace data + admin boundaries)</li>
<li><input type="checkbox" disabled="">plot house prices VS greenspace locations</li>
<li><input type="checkbox" disabled="">understanding json (valhalla) VS maps/python etc… know nothing</li>
</ul>
<section id="house-prices-indicator" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="house-prices-indicator"><span class="header-section-number">5.3.1</span> House prices indicator</h3>
<p><strong>Data processing workflow</strong></p>
<ul>
<li>See available datasets for House Price Statistics for Small Areas (HPSSAs) from <a href="https://github.com/ciupava/LandUseDemonstrator/tree/main/data">here: houseprices_available-data_HPSSA.xlsx</a></li>
<li>The <a href="https://www.ons.gov.uk/peoplepopulationandcommunity/housing/bulletins/housepricestatisticsforsmallareas/yearendingmarch2022">tables</a> come in <em>.xls</em> format</li>
<li>choose either MSOA or LSOA level:
<ul>
<li><strong>HPSSA Dataset 2</strong> - Median price paid by MSOA.xls <a href="https://www.ons.gov.uk/peoplepopulationandcommunity/housing/datasets/hpssadataset2medianhousepricebymsoaquarterlyrollingyear">file</a> (September 2022 version);<br> note that this dataset contains also breakdown by house type (detached, semidetached, terraced) and by newly/existing dwellings</li>
<li><strong>HPSSA Dataset 46</strong> - Median house prices by LSOA.xls <a href="https://www.ons.gov.uk/peoplepopulationandcommunity/housing/datasets/medianpricepaidbylowerlayersuperoutputareahpssadataset46">file</a></li>
</ul></li>
<li>need to estrapolate just the tab with the relevant info … <span class="math inline">\(\rightarrow\)</span> <mark>automate this??</mark> <br> “table 1a (all house types)”” = <em>Median price paid by MSOA, England and Wales, year ending Dec 1995 to year ending Mar 2022</em></li>
<li>filtering just the relevant grographies for Tyne and Wear county: <span class="math inline">\(\rightarrow\)</span> <mark>automate this??</mark>
<ul>
<li>MSOAs: <a href="https://github.com/ciupava/LandUseDemonstrator/tree/main/data">list in MSOAs_Tyne-Wear.txt</a><br> <code>MSOA20CD</code> = <code>MSOA code</code><br> <code>MSOA20NM</code> = <code>MSOA name</code><br></li>
<li>LSOAs: <a href="https://github.com/ciupava/LandUseDemonstrator/tree/main/data">list in TyneWear_LADs_list.csv</a> filter by Local authority:<br> code <code>LAD20CD</code> = <code>Local authority code</code><br> name <code>LAD20NM</code> = <code>Local authority name</code></li>
</ul></li>
<li>choose time … data published quarterly (4 times a year) with all editions back to 1995</li>
<li></li>
</ul>
</section>
<section id="accessibility-greenspaces" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="accessibility-greenspaces"><span class="header-section-number">5.3.2</span> Accessibility (… Greenspaces)</h3>
<ul>
<li><p>remove “private” spaces from the analysis (IE golf clubs)?</p></li>
<li><p>check “overlapping” features like pitches/leisure centres/etc within parks</p></li>
<li><p>routing <span class="math inline">\(\rightarrow\)</span> Valhalla <a href="https://valhalla.readthedocs.io/en/latest/api/isochrone/api-reference/">isochrones</a></p></li>
<li><p>census data</p></li>
<li><p>relevant layers: public venues (schools, hospitals), green/blue spaces,</p></li>
</ul>
</section>
</section>
<section id="agenda---november-29-tue---in-office" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="agenda---november-29-tue---in-office"><span class="header-section-number">5.4</span> Agenda - November, 29 [Tue] - In office</h2>
<ul class="task-list">
<li><input type="checkbox" disabled="">review of the project (objective, idea…)</li>
<li><input type="checkbox" disabled="">discussing the data<ul>
<li>see table in <a href="./data_sources.html">data page</a></li>
<li>see sources below:
<ul>
<li>accessibility (how to calculate, sources)</li>
<li>GHG emission (resolution)</li>
<li>house prices (the least concern?)</li>
</ul></li>
</ul></li>
<li><input type="checkbox" disabled="">discussing methodology<ul>
<li>2 processes to generate indicators:
<ul>
<li>LUR</li>
<li><mark>_____________</mark> (accessibility)</li>
</ul></li>
<li>output</li>
</ul></li>
<li><input type="checkbox" disabled="">name</li>
</ul>
</section>
<section id="november" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="november"><span class="header-section-number">5.5</span> November</h2>
<p>Need to fine-tune things after last talk with Dani (end of October).</p>
<p>Instead of trying to reproduce <a href="#did-someone-already-do-this">carbon.place results</a>, we want to produce a <mark><strong>Land Use regression model</strong></mark> <span class="math inline">\(\rightarrow\)</span> <strong><a href="#some-literature-on-lur">LUR</a></strong></p>
<p><strong>MAJOR UPDATE</strong> - We can’t use a regression model for indicators such as <em>accessibility</em>, where the dataset is derived/generated by us and not coming from “actual” measurement (like is the case for <del>GHG emissions or</del> house prices, for instance). <br>In this case we will need to find another procedure to generate a modelisation. We will then have <mark><strong>2 different procedures</strong></mark> to generate the indicators, depending on the type of indicator.<br> Within these two types, we aim at generating anyways a <mark>comprehensive methodology</mark> accross indicators to assess/analyse the different scenarios.<br>A certain scenario can in fact affect different indicators, for example removing a green area to add a working compound can impact positively jobs accessibility, lowering greenspace accessibility.</p>
<hr>
<section id="project-name" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="project-name"><span class="header-section-number">5.5.1</span> Project name</h3>
<p>A <mark><strong>good name</strong></mark> for the project? (acronym*)</p>
<p>what does “demonstrator” stand for, why should we stick to that term?</p>
<ul class="task-list">
<li><input type="checkbox" disabled=""><strong>L(O)UD</strong> = Land (:egg:) Use Demonstrator :mega:</li>
<li><input type="checkbox" disabled="" checked=""><strong>demoland</strong> 🏙</li>
<li><input type="checkbox" disabled="">🥚 and 🐥 … 🍳<ul>
<li><strong>LAID</strong> = LAnd Use Indicators Demonstrator 🪹</li>
<li><strong>NEST</strong> (?) 🪺</li>
</ul></li>
<li><input type="checkbox" disabled=""><strong>LOUSE</strong> = Land (o) USe Explanator <br> 🪲 (‘louse’ is singular for lice)</li>
<li><input type="checkbox" disabled=""><strong>DODO</strong> 🦤 … just because it’s a nice name</li>
</ul>
</section>
<section id="variables-creation" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="variables-creation"><span class="header-section-number">5.5.2</span> Variables creation</h3>
<p>We are searching data for:</p>
<ul>
<li>the indicators</li>
<li>the variables (land use features) to predict the indicators</li>
</ul>
<p>In a first phase we are concentrating on 4 of the indicators (the numbering refers to the Intro list <a href="./intro.html#indicators-building">here</a>):<br> <em>1.a/b</em>. <strong>Pollution/emissions</strong><br> <em>1.c</em>. <strong>Green space accessibility</strong><br> <em>2.b</em>. <strong>Jobs accessibility</strong><br> <em>2.c</em>. <strong>House prices</strong><br> Below, some notes for each indicator on the data searching process</p>
<hr>
<p><em>1.a/b</em>. <strong>Pollution/emissions</strong></p>
<p><strong>Indicator:</strong> <em>GHG emissions</em></p>
<p><strong>Predictive variables:</strong> <em>no. of trips, distance travelled, mode of transport</em></p>
<ul>
<li><p>data for GHG emissions (total, IE comprehensive of mobility, housing, etc) is available from gov.uk <a href="#data-availability">only at LAD level</a></p></li>
<li><p>[not relevant] <em>estimated</em> Per Capita Consumption-Based Greenhouse Gas Emissions for UK Lower and Middle Layer Super Output Areas, 2016. <a href="https://reshare.ukdataservice.ac.uk/854888/">Data Collection</a><br>Kilian, Lena and Owen, Anne and Newing, Andy and Ivanova, Diana (2021).<br>UK Data Service. 10.5255/UKDA-SN-854888</p></li>
</ul>
<hr>
<p><em>1.c</em>. <strong>Green space accessibility</strong></p>
<p><strong>Indicator:</strong> <em>Green space accessibility</em></p>
<p><strong>Predictive variables:</strong> <em>number of access points, areal extention of greenspaces, distance from greenspace (access point)</em></p>
<p>Definition:</p>
<blockquote class="blockquote">
proportion of an urban population living within a certain distance from a green space boundary
</blockquote>
<p><br> <a href="https://pubmed.ncbi.nlm.nih.gov/26573907/">Van Den Bosch et al., 2016</a></p>
<ul>
<li><p>UGS = Urban Green Space</p></li>
<li><p>see <a href="https://github.com/ciupava/LandUseDemonstrator/issues/5">Issue</a> on GitHub for relevant literature on indicators, definitions, methodology to generate UGS maps</p></li>
<li><p>accessibility is not actual data (like emissions for instance) but it’s itself calculated as an index, so what is the meaning in modeling it?</p></li>
<li><p>how we calculate the distance to the nearest green space… or the entrance gate (tricky)</p></li>
<li><p><strong>EEA Urban Atlas</strong> for UGS data (landcover map) <a href="https://www.eea.europa.eu/data-and-maps/data/copernicus-land-monitoring-service-urban-atlas">data available here</a> <br> Download per each metro areas <a href="https://land.copernicus.eu/local/urban-atlas/urban-atlas-2018?tab=download">here</a><br> Method described in <a href="https://www.euro.who.int/__data/assets/pdf_file/0005/321971/Urban-green-spaces-and-health-review-evidence.pdf">WHO Europe 2016 report</a></p>
<blockquote class="blockquote">
<p><strong>European Urban Atlas Class 1.4.1 (vector data code 14100):<br>Green Urban Areas</strong> (European Commission, 2011)<br> Minimum mapping resolution 0.25 ha, Minimum width: 10 m<br> <em>Included:</em><br> • Public green areas for predominantly recreational use such as gardens, zoos, parks, castle parks.<br> • Suburban natural areas that have become and are managed as urban parks.<br> • Forests or green areas extending from the surroundings into urban areas are mapped as green urban areas when at least two sides are bordered by urban areas and structures, and traces of recreational use are visible.<br> <em>Not included:</em><br> • Private gardens within housing areas<br> • Cemeteries<br> • Buildings within parks, such as castles or museums<br> • Patches of natural vegetation or agricultural areas enclosed by built‐up areas without being managed as green urban areas</p>
</blockquote>
<p>Note that several green areas in Newcastle fall under the category “Pasture” (see for example Nuns Moor)</p>
<blockquote class="blockquote">
<p>Lands that are permanently used (at least 5 years) for fodder production. Includes natural or sown herbaceous species, unimproved or lightly improved meadows and grazed or mechanically harvested meadows. Regular agriculture impact influences the natural development of natural herbaceous species composition.</p>
</blockquote>
<p>and allotments fall into “Sports and leisure facilities”</p></li>
</ul>
<p><img src="images/WHO_method_for_UGS.png" class="img-fluid"></p>
<ul>
<li><mark><strong>UK SOURCES</strong></mark><br>
<ul>
<li><p><strong>Ordnance Survey</strong> <a href="https://osdatahub.os.uk/downloads/open/OpenGreenspace">Open greenspace map</a> with technical notes <a href="https://www.ordnancesurvey.co.uk/business-government/tools-support/open-map-greenspace-support">here</a> <br> <span class="math inline">\(\rightarrow \rightarrow\)</span> <em>open data!</em> <br> Advantages:<br></p>
<ul>
<li>more accurate</li>
<li>covers England, Scotland, Wales</li>
<li><strong>has access points!!</strong></li>
<li>need for data cleaning, as many sport facilities/playgrounds are drawn with a separate polygon within the big park they are part of (overlapping features in the shp)</li>
<li>the file includes cemeteries AND allottments</li>
</ul></li>
<li><p><strong>Natural England</strong> <a href="http://publications.naturalengland.org.uk/publication/65021">Accessible Natural Green Space Standards in Towns and Cities: A Review and Toolkit for their Implementation (ENRR526)</a></p>
<ul>
<li>review and toolkit</li>
</ul></li>
<li><p><strong>Public Health England</strong> <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/904439/Improving_access_to_greenspace_2020_review.pdf">report</a></p>
<ul>
<li>… data??</li>
</ul></li>
<li><p><strong>Fields in trust</strong> <a href="https://www.fieldsintrust.org/green-space-index">Green Space Index</a></p>
<ul>
<li><a href="https://experience.arcgis.com/experience/5301c55a8189410b9428a90f05596af4">interactive map</a></li>
<li>they launched GSI in 2019</li>
<li>they use OS Open Greenspace Map (above) and ArcGIS</li>
<li>not available as open data</li>
</ul></li>
<li><p><strong><a href="#ahah">AHAH</a> <a href="https://data.cdrc.ac.uk/dataset/access-healthy-assets-hazards-ahah">Access to Healthy Assets &amp; Hazards</a></strong> (Dani suggested)</p>
<p>• A multi-dimensional index developed by the CDRC for Great Britain at LSOA level, contains also access to greenspace (passive) - already calculated</p>
<p>• … different versions:</p>
<p>VERSION 3 (2022)<br></p>
<p>VERSION 2 (2017) <br></p>
<p>VERSION 1 (2016)</p>
<p>• the current version (3) only gives the ‘passive’ greenspace, in terms of NDVI values (from Sentinel)</p>
<figure class="figure">
<p><img src="images/ahah_why.png" width="650" class="figure-img"></p>
<figcaption class="figure-caption">
<p>Screenshot from the <code>metadata</code> file (Version 3)</p>
</figcaption>
</figure>
<p><!-- ![screenshot from the `metadata` file](images/ahah_why.png) --> where the values range between … and … (that’s the index)</p>
<p>though, by the description the “passive” greenspace should be a measure of surface (km2):</p>
<figure class="figure">
<p><img src="images/ahah_2017.png" width="650" class="figure-img"></p>
<figcaption class="figure-caption">
<p>Screenshot from the Version 2 Short Technical Report</p>
</figcaption>
</figure>
<p>… see “active” and “passive” greenspace definition below</p>
<p>• the latest pubblication claims to use OSM data:<br> <a href="https://www.nature.com/articles/s41597-019-0114-6">Daras K., Green M. A., Davies A., Barr B., Singleton A. 2019. Open data on health-related neighbourhood features in Great Britain. Scientific data 6 (1), 107. DOI: 10.1038/s41597-019-0114-6</a></p>
<blockquote class="blockquote">
<p>From all the available types of ‘green’ spaces in the <strong>OSM data</strong>, we selected only areas tagged as public accessible with the following area types: <mark>cemetery, common, dog park, scrub, fell, forest, garden, greenfield, golf course, grass, grassland, heath, meadow, nature reserve, orchard, park, pitch, recreation ground, village green, vineyard and wood </mark><br> …<br> The green space indicator has been defined as an area measure of access to green space available to each postcode that intersect with a 900 meters buffer zone</p>
</blockquote>
<p>but, from this 2019 publication, it looks like they are using the OS dataset (and giving both active and passive access): <br> <a href="https://figshare.com/articles/online_resource/Access_to_Healthy_Assets_and_Hazards_AHAH_-_Updated_version_2017/8295842/1">Daras, K., Green, MA., Davies, A., Singleton, A., Barr, B. 2019. Access to Healthy Assets and Hazards (AHAH) - Updated version 2017. figshare. Short Technical Report. DOI: 10.6084/m9.figshare.8295842.v1</a></p>
<blockquote class="blockquote">
<p>Open data from OS on Green spaces was used for preparing two variables related to the distance from the nearest green space (active) and the total green space areas available to each postcode in a range of a 900-meter buffer (passive) before creating LSOA level averages</p>
</blockquote>
<p><a href="https://data.cdrc.ac.uk/dataset/access-healthy-assets-hazards-ahah/resource/note-active-and-passive-green-spaces-v2">Note on Active and Passive Green Spaces</a></p>
<blockquote class="blockquote">
<p>‘active’ is based on the distance people have to travel to their nearest greenspace access point conducive to physical activity […]<br> The measure is built up from analysis at the postcode level. Distances from each postcode centroid along road networks to the nearest greenspace access point are calculated. Postcodes are matched to LSOAs and an average is taken to get an LSOA score (mean value).<br></p>
<p>The second greenspace indicator labelled as ‘passive’ is based on the proportion of greenspace within a 900 meter buffer (~15 mins walk) from where people live</p>
</blockquote>
<p>the (assumed?) first version though uses OSM (like described above):<br> <a href="https://doi.org/10.1016/j.healthplace.2018.08.019">Green, M. A., Daras, K., Davies, A., Barr, B. &amp; Singleton, A. 2018. Developing an openly accessible multi-dimensional small area index of ‘Access to Healthy Assets and Hazards’ for Great Britain,</a> <br> but is aware of OS, from the Appendix:</p>
<blockquote class="blockquote">
<p>There were few open source alternatives (or data that could be shared openly within the terms of their licences) containing similar data during the construction of the indicators and our index. <mark>Since then, the <strong>Ordnance Survey (OS)</strong> have released an open resource of locations of green space </mark>(OS Green Space Layer; https://getoutside.ordnancesurvey.co.uk/greenspaces/) . We are currently undertaking a full comparison of OSM and OS to explore the strengths and weaknesses of each data source with the aim of improving our green space metrics, however such an evaluation is beyond the scope of this paper.</p>
</blockquote>
<p>• They use <em>Routino</em> open source software <a href="https://www.routino.org">https://www.routino.org</a> to identify the shortest path between two locations using the OSM transport network</p>
<blockquote class="blockquote">
<p>measured the network distance between the population-weighted centroid of each postcode in the National Statistics Postcode Lookup (NSPL) and the coordinates of the nearest service (e.g.&nbsp;a population-weighted centroid of postcode for off-license)</p>
</blockquote>
<p>code <a href="https://github.com/GDSL-UL/AHAH">here</a></p></li>
<li><p><strong>Conclusions:</strong></p>
<ul>
<li>not enough METADATA to be able to understand what to use (missing field names)</li>
<li>not clear which data source they use in which version (NDVI, OS, OSM?)</li>
<li>only passive accessibility available in last version</li>
</ul>
<p><mark>WRITE TO THE TEAM</mark> detailed list of questions</p></li>
</ul></li>
</ul>
<hr>
<p><em>2.b</em>. <strong>Jobs accessibility</strong></p>
<p><strong>Indicator:</strong> <em>accessibility to jobs (measured/calculated)</em></p>
<p><strong>Predictive variables:</strong> <em>working population, n.&nbsp;of available jobs</em></p>
<ul>
<li>accessibility is not actual data (like emissions for instance) but it’s itself calculated as an index, so what is the meaning in modeling it?</li>
<li>QUANT <a href="http://quant.casa.ucl.ac.uk/map2.aspx?v=JobAccessibilityObs">map</a> - how is it calculated - how to download it … format, etc</li>
<li><a href="#accessibility-data">Accessibility Destination Datasets</a> see paragraph below</li>
</ul>
<hr>
<p><em>2.c</em>. <strong>House prices</strong></p>
<p><strong>Indicator:</strong> <em>house price (avg / zonal effect / dimension / amenities ???)</em></p>
<p><strong>Predictive variables:</strong> <em>dwellings availability, services, accessibility to PT</em></p>
<ul>
<li>what scenario on house prices?</li>
<li><strong><a href="https://www.data.gov.uk/search?q=house+price">gov.uk data</a></strong><br> most recent source:<br> <a href="https://www.ons.gov.uk/peoplepopulationandcommunity/housing/bulletins/housepricestatisticsforsmallareas/yearendingmarch2022">House price statistics for small areas in England and Wales: year ending March 2022</a>
<ul>
<li><strong>Differences to other house price statistics:</strong>
<blockquote class="blockquote">
There are two sets of official statistics for house prices. In addition to these <strong>HPSSAs</strong>, the Office for National Statistics (ONS) also produces the <strong>UK House Price Index (UK HPI)</strong>. The HPSSAs measure the number of property transactions and the price paid for properties sold in a given period, while the UK HPI measures the changing value of properties in the housing market. You can find out more about the differences and uses of these outputs in our House price statistics for small areas Quality and Methodology Information (QMI).
</blockquote></li>
</ul></li>
<li>available at MSOA level:</li>
</ul>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Dataset No.</th>
<th>Dataset Name</th>
<th>Periodicity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HPSSA dataset 1</td>
<td>Number of sales of residential properties for middle layer super output areas</td>
<td>Quarterly</td>
</tr>
<tr class="even">
<td>HPSSA dataset 2</td>
<td>Median price paid for middle layer super output areas</td>
<td>Quarterly</td>
</tr>
<tr class="odd">
<td>HPSSA dataset 3</td>
<td>Mean house prices for middle layer super output areas</td>
<td>Quarterly</td>
</tr>
<tr class="even">
<td>HPSSA dataset 4</td>
<td>Lower quartile house prices for middle layer super output areas</td>
<td>Annually</td>
</tr>
<tr class="odd">
<td>HPSSA dataset 5</td>
<td>Tenth percentile house prices for middle layer super output areas</td>
<td>Quarterly</td>
</tr>
</tbody>
</table>
<section id="accessibility-data" class="level4" data-number="5.5.2.1">
<h4 data-number="5.5.2.1" class="anchored" data-anchor-id="accessibility-data"><span class="header-section-number">5.5.2.1</span> Accessibility data</h4>
<p><mark><strong>UPDATE</strong></mark></p>
<p>It seems that from 2014 the same type of data is released as <a href="https://www.gov.uk/government/publications/journey-time-statistics-guidance">Journeytime Statistics</a></p>
<p>with the list of tables available <a href="https://www.gov.uk/government/statistical-data-sets/journey-time-statistics-data-tables-jts#user-access-to-key-services-by-journey-time-jts02">here</a></p>
<p>NEED TO CHECK if they give also number of people, that seems missing in the new data format.<br> For example the variable:</p>
<table class="table">
<tbody>
<tr class="odd">
<td><code>All20_PT/walk</code></td>
<td>EMPLO049</td>
<td>Users within 20 minutes by PT/walk</td>
</tr>
</tbody>
</table>
<p>does not appear in the new tables, though, we have the total population (<code>Empl_pop</code>) AND the percentage of population per each mode of transport + time, for example (for table 0501):<br></p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Alternate name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>100EmpPT15pct</code></td>
<td>Emp106</td>
<td>% users within 15 minutes of employment centres with 100 to 499 jobs available by PT/walk</td>
</tr>
<tr class="even">
<td><code>100EmpPT30pct</code></td>
<td>Emp107</td>
<td>% users within 30 minutes of employment centres with 100 to 499 jobs available by PT/walk</td>
</tr>
<tr class="odd">
<td><code>100EmpPT45pct</code></td>
<td>Emp108</td>
<td>% users within 45 minutes of employment centres with 100 to 499 jobs available by PT/walk</td>
</tr>
<tr class="even">
<td><code>100EmpPT60pct</code></td>
<td>Emp109</td>
<td>% users within 60 minutes of employment centres with 100 to 499 jobs available by PT/walk</td>
</tr>
</tbody>
</table>
<p>… from which we could infer the variable above? <br></p>
<hr>
<p>Some useful and valuable datasets on <em>accessibility</em> by several means of transport was (apparently?) available from DFT until 2012, in csv format.<br> After some strenuous research managed to find the archive for it <a href="https://webarchive.nationalarchives.gov.uk/ukgwa/20131223133629mp_/https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/240307/accessibility-statistics-2012.pdf">here</a>.</p>
<p><strong>Accessibility Destination Datasets</strong></p>
<ul>
<li>they measure accessibility to key services like:
<ul>
<li>food stores</li>
<li>education</li>
<li>health care</li>
<li>town centres</li>
<li>employment centres</li>
</ul></li>
<li>published for England at national, regional, LAD and LSOA level.</li>
<li>have they been substited by <a href="https://www.gov.uk/government/collections/journey-time-statistics">Journey time statistics</a> data?</li>
</ul>
<p><strong><em>Note</em></strong> data at LSOA level is also available in gov.uk <a href="https://www.gov.uk/government/statistical-data-sets/acs05-travel-time-destination-and-origin-indicators-to-key-sites-and-services-by-lower-super-output-area-lsoa">in xls format</a></p>
<p>where also 2013 is included!</p>
<blockquote class="blockquote">
Excel datasets containing raw destination data for calculating Accessibility statistics. This gives the locations of the different services used within these calculations: Primary schools, Secondary Schools, Further Education, Hospitals, GPs, Town Centres, Employment Centres
</blockquote>
<p>these makes up to 8 tables of accessibility:</p>
<p><img src="images/accessibility_data.png" class="img-fluid"></p>
<p><em>screenshot (from gov.uk webpage) of some of the the available tables</em></p>
<p><a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/372139/accessibility-statistics-guidance.pdf">Accessibility Statistics Guidance 2014</a></p>
</section>
</section>
<section id="theoretical-framework" class="level3" data-number="5.5.3">
<h3 data-number="5.5.3" class="anchored" data-anchor-id="theoretical-framework"><span class="header-section-number">5.5.3</span> Theoretical framework</h3>
<p>In a general (non-linear/linear) <em>regression model</em> we have a given dependent variable which we try to explain by several independent/explanatory variables. <br> In our case for a LUR model we have, considering for example GHG emissions from mobility or housing:</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td>Dependent variable</td>
<td>actual data for GHG emissions</td>
<td></td>
</tr>
<tr class="even">
<td>Explanatory variables</td>
<td>landuse variables</td>
<td>(ex. n.&nbsp;of trips, distance, <br> mode of transport…)</td>
</tr>
</tbody>
</table>
<p><br><br></p>
<p><em>Formulas here</em> <br><br></p>
<hr>
</section>
<section id="some-literature-on-lur" class="level3" data-number="5.5.4">
<h3 data-number="5.5.4" class="anchored" data-anchor-id="some-literature-on-lur"><span class="header-section-number">5.5.4</span> Some literature on LUR</h3>
<p><strong>Questions</strong></p>
<ol type="1">
<li><p>LUR is generally used for air quality prediction <br> <em>…FIND examples of non-air pollutants applications?</em></p></li>
<li><p>LUR potential predictor variables extraction … relevant for us? (limited number of variables) <span class="math inline">\(\rightarrow\)</span> <em>ideally we’d like to perform this as well</em></p></li>
<li><p>LUR output is raster VS vectorial <span class="math inline">\(\rightarrow\)</span> <em>we’ll need to aggregate the data at some spatial level (MSOAs for instance), introducing some level of approximation</em></p></li>
<li><p>not clear how the <em>spatial</em> connotation enters the model, just because we use data defined at (some) geographic level? <em>YES</em></p></li>
</ol>
<hr>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Land_use_regression_model">https://en.wikipedia.org/wiki/Land_use_regression_model</a>
<blockquote class="blockquote">
A raster graphic image of the area is generated and intersected with area-level population data to formulate the exposure distribution.
</blockquote></li>
<li><a href="https://www.sciencedirect.com/science/article/abs/pii/S1352231008005748">Hoek et al., 2008</a> “A review of land-use regression models to assess spatial variation of outdoor air pollution” <br> They review 25 land-use regression studies.<br>
<blockquote class="blockquote">
Application of the land-use regression approach for air pollution mapping was introduced in the SAVIAH (Small Area Variations In Air quality and Health) study (Briggs et al., 1997). The technique was initially termed regression mapping
</blockquote>
<blockquote class="blockquote">
Land-use regression combines monitoring of air pollution at typically 20–100 locations, spread over the study area, and development of stochastic models using predictor variables usually obtained through geographic information systems (GIS)
</blockquote>
<blockquote class="blockquote">
main components of LUR: monitoring data, geographic predictors and model development and validation
</blockquote></li>
<li><a href="https://www.sciencedirect.com/science/article/pii/S1877584515000325?via%3Dihub">Bertazzon et al., 2015</a> “Accounting for spatial effects in land use regression for urban air pollution modeling”</li>
</ul>
<blockquote class="blockquote">
LUR models are described by standard regression equations. Over the past decade, land use regression (LUR) modeling has emerged as a preferred method for assessing exposure to spatially heterogeneous pollutants, including NO2 (Health Effects Institute, 2010). Despite their advantages, LUR models rely on spatial data; therefore, they are subject to the spatial effects associated with the properties of these data.
</blockquote>
<ul>
<li><a href="https://github.com/dwmorley/RLUR">Morley and Gulliber, 2018</a>“A land use regression variable generation, modelling and prediction tool for air pollution exposure assessment”</li>
</ul>
<p><mark>RLUR</mark> software to develop LUR model in R;<br> Open-source code available in <a href="https://github.com/dwmorley/RLUR">GitHub</a>;<br> GUI with visualisation tools</p>
<ul>
<li><a href="https://www.researchgate.net/publication/339851484_PyLUR_Efficient_software_for_land_use_regression_modeling_the_spatial_distribution_of_air_pollutants_using_GDALOGR_library_in_Python">Ma et al.&nbsp;2020</a> “<mark>PyLUR</mark>: efficient software for land use regression modelling the spatial distribution of air pollutants using GDAL/OGR library in Python”</li>
</ul>
<blockquote class="blockquote">
Although conceptually quite simple, its successful implementation requires detailed knowledge of the area, expertise in GIS, statistics, and programming skills, which makes this modelling approach <strong>relatively inaccessible to novice users</strong>.
</blockquote>
<blockquote class="blockquote">
PyLUR out-performs <mark>RLUR</mark> for modelling in the Bradford and Auckland case studies examined. Furthermore, PyLUR is much more efficient in data processing and it has a capability to handle detailed GIS input data.
</blockquote>
<blockquote class="blockquote">
<sub><sup>The principles of LUR modelling can be summarized in <strong>five steps</strong>. <strong>First</strong>, air pollution monitoring and GIS data are collected within the scope of the study area. <strong>Secondly</strong>, different kinds of potential predictor variables for each site are generated using GIS buffering or other geospatial analysis methods. <strong>Thirdly</strong>, multiple regression analysis is carried out to develop one regression equation establishing the relationship between the observed air pollutant concentrations and significant predictor variables selected from a pool of all potential predictor variables. <strong>Fourthly</strong>, model performance is evaluated using holdout or cross-validation. **Finally*, once the model is successfully validated, it can be applied to predict the concentration at un-sampled points of interest or generate an air pollutant concentration map of the whole study area (Morley and Gulliver, 2018).</sup></sub>
</blockquote>
<ul>
<li><a href="https://www.sciencedirect.com/science/article/pii/S1364815221001511">Molter and Lindley, 2021</a> “Developing land use regression models for environmental science research using the <mark>XLUR</mark> tool – More than a one-trick pony”</li>
</ul>
<blockquote class="blockquote">
A Python toolbox for ArcGIS Pro that enables the development and application of land use regression models
</blockquote>
<p>… relevant for literature (it’s developed for ArcGIS, so no use)</p>
</section>
<section id="lur-in-python" class="level3" data-number="5.5.5">
<h3 data-number="5.5.5" class="anchored" data-anchor-id="lur-in-python"><span class="header-section-number">5.5.5</span> LUR in Python</h3>
<ul>
<li><p>check out this blog <a href="https://towardsdatascience.com/how-to-build-a-regression-model-in-python-9a10685c7f09">How to Build a Regression Model in Python</a></p></li>
<li><p>Geographic Data Science with Python, book <a href="https://geographicdata.science/book/notebooks/11_regression.html">Chap. 11, Spatial Regression</a></p></li>
<li><p>Paper <a href="https://link.springer.com/article/10.1007/s11783-020-1221-5">PyLUR: Efficient software for land use regression modeling the spatial distribution of air pollutants using GDAL/OGR library in Python</a> <br> Note the code is available online on ResearchGate <a href="https://www.researchgate.net/publication/339851484_PyLUR_Efficient_software_for_land_use_regression_modeling_the_spatial_distribution_of_air_pollutants_using_GDALOGR_library_in_Python">here</a> (find “linked data” tab)</p></li>
</ul>
</section>
<section id="facts-on-ghg-emissions" class="level3" data-number="5.5.6">
<h3 data-number="5.5.6" class="anchored" data-anchor-id="facts-on-ghg-emissions"><span class="header-section-number">5.5.6</span> Facts on GHG emissions</h3>
<p>Governmental report <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1086967/uk-local-regional-greenhouse-gas-emissions-2005-2020-release.pdf">UK local authority and regional greenhouse gas emissions national statistics, 2005 to 2020</a></p>
</section>
</section>
<section id="october" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="october"><span class="header-section-number">5.6</span> October</h2>
<p><strong>Initial trials</strong></p>
<p>Working on <em>a. mobility based emissions</em> <span class="math inline">\(\rightarrow\)</span> IE transport data</p>
<p>&amp;</p>
<p>Building <em>base scenario</em></p>
<p>Roadmap:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">Try to dl/open/visualise SPC data <span class="math inline">\(\rightarrow\)</span> <em>Note: study case Metropolitan county of Tyne and Wear</em></li>
<li><input type="checkbox" disabled="">Investigate potentially relevant data from <a href="#people-behavior">UK Data Services</a> data <span class="math inline">\(\rightarrow\)</span> any other relevant dataset?</li>
<li><input type="checkbox" disabled="">How to connect/integrate TUS to SPC dataset – why?</li>
<li><input type="checkbox" disabled="">visualise the integrated dataset <span class="math inline">\(\rightarrow\)</span> <em>base scenario</em></li>
<li><input type="checkbox" disabled="">think “future scenarios”</li>
</ul>
<p><img src="images/tynewear_county_lads.png" class="img-fluid"> <em>The 5 LADs in the Metropolitan County of Tyne and Wear, highlighted are also the 4 major town areas</em></p>
<hr>
<p><strong>Keep in mind when you’ll “generalise” the procedure</strong></p>
<p><em>IE pass from the study case to a national case</em></p>
<ul>
<li><p>how to select MSOAs for Origin and Destination from the dataset (take off abroad destinations as well)</p></li>
<li></li>
</ul>
<hr>
<section id="defining-relations" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="defining-relations"><span class="header-section-number">5.6.1</span> Defining relations</h3>
<p>We can see the Indicators <span class="math inline">\(I_{i}\)</span>, with <span class="math inline">\(i = \{1, ..., n\}\)</span>, as a function of different land uses <span class="math inline">\(l_{j}\)</span> where <span class="math inline">\(j = \{1, ..., k\}\)</span> and <span class="math inline">\(I_{i}\)</span> can be expressed as generic mathematical relation (that we express with the symbol “<span class="math inline">\(\star\)</span>”“) between several <span class="math inline">\(l_{j}\)</span> weighted by <span class="math inline">\(k\)</span> generic weights/parameters <span class="math inline">\(w_{j}\)</span>, as follows:</p>
<p><span class="math display">\[I_{i}(l) = w_1^il_{1} \star  w_2^il_{2} \dots \star w_k^il_{k}\]</span></p>
<p>Different indicators can depend on same landuse variables, and per each indicator the scenarios can be expressed by acting on the paramters <span class="math inline">\(w_{j}\)</span>.</p>
<p>As an example, using the definition above the indicator Mobility based emissions (a.) could be expressed <strong>for commuting trips</strong> <mark>per mode of transport</mark> and per each MSOA as:</p>
<!-- $[\textit{emissions/ msoa / year}] = w_1[trips/day] \star w_2[distance/trip] \star w_3[n\_individuals] \star w_4[n\_commuting days/year] \star w_5[\textit{CO}_2 \textit{k}]$ -->
<p><span class="math display">\[
\begin{align}
[\textit{emissions/msoa/year}] &amp; =  w_1[trips/day] \star\\
&amp; \star  w_2[distance/trip] \star\\
&amp; \star  w_3[n\_individuals] \star\\
&amp; \star  w_4[\textit{n of commuting days/year}] \star \\
&amp; \star w_5[\textit{CO}_2 \textit{k}]
\end{align}
\]</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\([trips/day]\)</span> is a fixed value (average per person from DFT data … *)</li>
<li><span class="math inline">\([distance/trip]\)</span> is calculated as shortest distance between the MSOAs’ centroids</li>
<li><span class="math inline">\([n\_individuals]\)</span> is given by the UK Census 2011 commuting flow</li>
<li><span class="math inline">\([\textit{n of commuting days/year}]\)</span> is a fixed value (average per person from DFT data … *)</li>
<li><span class="math inline">\([CO_2 k]\)</span> is the carbon dioxide equivalent emission factor per mode of transport</li>
</ul>
</section>
<section id="working-questions" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="working-questions"><span class="header-section-number">5.6.2</span> Working questions:</h3>
<ul class="task-list">
<li><p><input type="checkbox" disabled="">which year to take into consideration for the analysis? (Census, conversion factors, surveys…)</p></li>
<li><p><input type="checkbox" disabled="">when I calculate the distance home-place of work, how do I consider the intraMSOA trips (IE within the same MSOA), as I am only taking into account the centroids of the MSOAs?</p></li>
<li><p><input type="checkbox" disabled="">how we count total number of people (age, people working)</p></li>
<li><p><input type="checkbox" disabled="">do we give the results per capita (then see point above) or total per MSOA</p></li>
<li><p><input type="checkbox" disabled="">how many hours for the working from home people (not counting for now, as not using transport)</p></li>
</ul>
<hr>
</section>
<section id="approximations" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="approximations"><span class="header-section-number">5.6.3</span> Approximations</h3>
<ol type="a">
<li><p>only OD within MSOAs of this county</p></li>
<li><p>considering as distance only the pop weighted centroids for each MSOA</p></li>
<li><p>London has specific values for CO2 conversion factors (ex for cabs, buses, underground) but only using general values (correct later if needed for London case)</p></li>
<li><p>…</p></li>
</ol>
<hr>
<p>Commuting is really just one part of the total travels by car per per person per year:</p>
<p><img src="images/car_trips_per_person_travel_survey.png" class="img-fluid"> <em>source: <a href="https://www.gov.uk/government/statistics/national-travel-survey-2020/national-travel-survey-2020">national travel survey</a></em></p>
<p>… it sounds then reductive to consider only commuting trips for emissions!</p>
<hr>
</section>
<section id="python-code" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="python-code"><span class="header-section-number">5.6.4</span> Python code</h3>
<p><strong>Note:</strong> first trials in R, as I am more confident with the language, and trying to reproduce the code from carbun calculator for <a href="https://github.com/creds2/CarbonCalculator/blob/master/R/prep_travel_to_work.R">prep_travel_to_work.R</a>,</p>
<p>will then translate to Python</p>
<ul>
<li><p>Remember to add in <em>READ_ME</em> a walkthrough.</p></li>
<li><p>Using <code>env.yml</code> <span class="math inline">\(\dots\)</span> <em>use <code>conda</code> or <code>poetry</code>?</em></p></li>
</ul>
</section>
<section id="preliminary-results" class="level3" data-number="5.6.5">
<h3 data-number="5.6.5" class="anchored" data-anchor-id="preliminary-results"><span class="header-section-number">5.6.5</span> Preliminary results</h3>
<p><em>Origin Destination flows of individuals for commuting to work (2011 UK Census data), the Metropolitan County of Tyne and Wear, separated by mode of transport</em> <img src="images/od_tynewear_bymode.png" class="img-fluid"></p>
<p><em>Preliminary results for GHG emissions from cars, total per MSOA per year in Tyne and Wear</em> <img src="images/results_tynewear_car_emis_prelim.png" class="img-fluid"></p>
</section>
</section>
<section id="september" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="september"><span class="header-section-number">5.7</span> September</h2>
<p><strong>Exploratory phase</strong></p>
<p>The idea is to focus on a few indicators (one or two) in order generate a <em>methodology</em> to apply to different variables (IE all the rest of indicators)</p>
<p>Concentrating on Indicators for <a href="./intro.html#net-zero">Net-zero a and b</a>:</p>
<ul>
<li><ol type="a">
<li><em>mobility based emissions</em> … integration with SPC <span class="math inline">\(/\)</span> AB-street?</li>
</ol></li>
<li><ol start="2" type="a">
<li><em>housing based emissions</em></li>
</ol></li>
</ul>
<section id="data-availability" class="level3" data-number="5.7.1">
<h3 data-number="5.7.1" class="anchored" data-anchor-id="data-availability"><span class="header-section-number">5.7.1</span> Data availability</h3>
<hr>
<ol type="1">
<li><del>(aggregated at LAD level) UK GHG emissions national statistics, estimates per Local Authority <a href="https://www.gov.uk/government/statistics/uk-local-authority-and-regional-greenhouse-gas-emissions-national-statistics-2005-to-2020">Data for 2005 - 2020</a></del> <span class="math inline">\(\rightarrow\)</span> this datum is a sum of emissions from 2005-2020</li>
</ol>
<hr>
<section id="a.-mobility-based-emissions" class="level4" data-number="5.7.1.1">
<h4 data-number="5.7.1.1" class="anchored" data-anchor-id="a.-mobility-based-emissions"><span class="header-section-number">5.7.1.1</span> a. mobility based emissions</h4>
<ol type="1">
<li><p>we can get from gov.uk CO<sub>2</sub>e (carbon dioxide equivalent) emissions factors for several occupations and travel modes, including transport, freight, etc <a href="https://www.gov.uk/government/collections/government-conversion-factors-for-company-reporting">link</a>;&lt;br&gt; We get the emission factors per mode of transport from the tab “Business travel-land” and “homeworking” (for working from home individuals)</p></li>
<li><p>OD flows from UK census … <strong>only to work and home</strong>? <em><del>check source</del></em> <span class="math inline">\(\rightarrow\)</span> YES <span class="math inline">\(\Downarrow\)</span></p></li>
<li><p>get travel to school flow data from Propensity to Cycle Tool <a href="https://www.pct.bike/m/">PCT</a>?</p></li>
<li><p>Location of usual residence and place of work by method of travel to work (…origin destination flows) <del>table WU03UK](https://wicid.ukdataservice.ac.uk/cider/wicid/downloads.php) at LAD level<br>
<em>Note:</em> can download all the tables for “Location of usual residence and place of work by method of travel to work” at different levels (LAD to LSOA, though the lattest is not Open data) here https://wicid.ukdataservice.ac.uk/cider/about/data_int.php?type=2</del> &lt;br&gt; <strong>safeguarded data!!</strong> git sttuslet’s find <mark>MSOA</mark> data: &lt;br&gt; <a href="Location of usual residence and place of work by method of travel to work">nomisweb</a></p></li>
</ol>
<ul>
<li><p>WU03BEW(with ‘outside UK’ detailed) <strong>safeguarded</strong></p></li>
<li><p>WU03EW (with ‘outside UK’ collapsed) <strong>open</strong></p></li>
</ul>
<hr>
</section>
<section id="b.-housing-based-emissions" class="level4" data-number="5.7.1.2">
<h4 data-number="5.7.1.2" class="anchored" data-anchor-id="b.-housing-based-emissions"><span class="header-section-number">5.7.1.2</span> b. housing based emissions</h4>
<p>Sub-national electricity and gas consumption data, <a href="https://www.gov.uk/government/statistical-data-sets/stacked-electricity-consumption-statistics-data">overview link</a></p>
<ul>
<li><a href="https://www.gov.uk/government/collections/sub-national-electricity-consumption-data">electricity consumption</a>:</li>
</ul>
<ol type="a">
<li><p>one table per year (20105 to 2020) of total consumption at region and LAD levels <a href="https://www.gov.uk/government/statistical-data-sets/regional-and-local-authority-electricity-consumption-statistics">link</a></p></li>
<li><p>one table per year (2010 to 2020) of total consumption at LSOA or MSOA level <a href="https://www.gov.uk/government/statistics/lower-and-middle-super-output-areas-electricity-consumption">link</a></p></li>
<li><p>electricity and gas consumption (kWh) at postcode level (England, Scotland, Wales), one table per year, 2013,2015-2020 <a href="https://www.gov.uk/government/publications/postcode-level-domestic-gas-and-electricity-consumption-about-the-data">Experimental</a></p></li>
<li><p>electricity consumption data for 2005 to 2020 as a single table, with years stacked one above the other <a href="https://www.gov.uk/government/statistical-data-sets/stacked-electricity-consumption-statistics-data">stacked data</a></p></li>
</ol>
<ul>
<li>analogous links for <a href="https://www.gov.uk/government/collections/sub-national-gas-consumption-data">gas consumption</a></li>
</ul>
<hr>
</section>
<section id="people-behavior" class="level4" data-number="5.7.1.3">
<h4 data-number="5.7.1.3" class="anchored" data-anchor-id="people-behavior"><span class="header-section-number">5.7.1.3</span> People behavior</h4>
<p>People behavior and time use from <em>The UK Time Diary Study 2014 - 2015</em> - UK Time Use Survey carried by NatCen and available from <a href="https://ukdataservice.ac.uk/">UK Data Service</a></p>
<p>what we can get from this source: time people spend in different activities, mode of transport (yes?)</p>
</section>
</section>
<section id="did-someone-already-do-this" class="level3" data-number="5.7.2">
<h3 data-number="5.7.2" class="anchored" data-anchor-id="did-someone-already-do-this"><span class="header-section-number">5.7.2</span> Did someone already do this?</h3>
<p><a href="https://www.carbon.place/">carbon.place</a></p>
<p>Project from Malcom Morgan (Univ of Leeds) …</p>
<blockquote class="blockquote">
<p>The PBCC estimates the average carbon footprint per person for each LSOA in England</p>
</blockquote>
<p><strong>NOTE:</strong></p>
<p>cool project, GitHub code available but not reproducible (?)</p>
<p>opened issue here <a href="https://github.com/creds2/CarbonCalculator/issues/6">https://github.com/creds2/CarbonCalculator/issues/6</a></p>
</section>
</section>
<section id="open-general-questions" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="open-general-questions"><span class="header-section-number">5.8</span> Open general questions</h2>
<p><em>And plausible answer</em></p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" checked="">importance of localised emissions and need for air-flow modelling … <em>not relevant for GHG</em></p></li>
<li><p><input type="checkbox" disabled="" checked="">what is the Research Question <span class="math inline">\(\rightarrow\)</span> <em>What are the “best” values in the parametrisation of the land use variables? Could we train the computer to predict these values?</em></p></li>
<li><p><input type="checkbox" disabled="" checked="">Resolution <del>LSOAS/</del> <em>MSOAS</em> ? feedback from Dani regarding SS: <em>SS gives conversion to LSOAs</em> <span class="math inline">\(\Downarrow\)</span></p></li>
<li><p><input type="checkbox" disabled="" checked="">how to generate scenarios - <em>ideas: change parameters’ range/values, run ABstreet simulations…?</em></p></li>
<li><p><input type="checkbox" disabled="" checked="">integrate with SPC - <em>need to integrate more Census variables? feasible?</em></p></li>
<li><p><input type="checkbox" disabled="">Use SPC (individuals’ level data) as we aggregate at MSOA level… what variables are meaningful when aggregated?</p></li>
<li><p><input type="checkbox" disabled="">can we actually build a methodology, given the different range of indicators and data?</p></li>
<li><p><input type="checkbox" disabled="">how turn on/off scenarios in the visualisation- <em>different layers in the map</em></p></li>
<li><p><input type="checkbox" disabled="">type of output - <em>map, web …</em> <del>MapBox</del> <em>MapLibre GL, Leaflet, …</em></p></li>
</ul>
<hr>
<section id="output-map-generation" class="level3" data-number="5.8.1">
<h3 data-number="5.8.1" class="anchored" data-anchor-id="output-map-generation"><span class="header-section-number">5.8.1</span> Output / map generation</h3>
<p>Note: could generate a website via <a href="https://maplibre.org/">MapLibre</a>, checked the options</p>
<!-- Let's see if [this map link](map_again.html) works  -->
<!-- What about a nested map

<link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/maplibre-gl-js-docs/assets/favicon/apple-touch-icon.png?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/maplibre-gl-js-docs/assets/favicon/favicon-32x32.png?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/maplibre-gl-js-docs/assets/favicon/favicon-16x16.png?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="manifest" href="/maplibre-gl-js-docs/assets/favicon/site.webmanifest?v=rMBbQAR5BL"/><link data-react-helmet="true" rel="mask-icon" href="/maplibre-gl-js-docs/assets/favicon/safari-pinned-tab.svg?v=rMBbQAR5BL" color="#4264fb"/><link data-react-helmet="true" rel="shortcut icon" href="/maplibre-gl-js-docs/assets/favicon/favicon.ico?v=rMBbQAR5BL"/> -->


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./method.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Methodology</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>